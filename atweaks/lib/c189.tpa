///////////////
// PnP plants, Animals and Magical Beasts
///////////////


INCLUDE "atweaks/lib/tactical_shared.tpa"

APPEND ~RACE.IDS~ ~164	MYCONID~ UNLESS ~MYCONID~						   		 // Add new race entry: Myconid
// APPEND ~RACE.IDS~ ~176	SHAMBLING_MOUND~ UNLESS ~SHAMBLING_MOUND~		   		 // Add new race entry: Shambling Mound
APPEND ~state.IDS~ ~0x8014202D STATE_OUT_OF_ACTION~ UNLESS ~STATE_OUT_OF_ACTION~ // Add new state entry: Feeblemind & Charmed & Helpless & Stunned & Sleeping & Blind & Confused & Panic
APPEND ~state.IDS~ ~0x00400010 STATE_INVISIBLE~ UNLESS ~STATE_INVISIBLE~ // Add new state entry: Feeblemind & Charmed & Helpless & Stunned & Sleeping & Blind & Confused & Panic

OUTER_SET DiseaseSecType = fl#Disease

//////////////////////////////
// New spells
//////////////////////////////

/////////// Plants: Fungi & Shamblers ///////////
// Gas Spores
ADD_PROJECTILE ~atweaks/pro/plants/rr#gassp.pro~                                 	// Spore Explosion projectile
COPY ~atweaks/spl/plants/rr#gassp.spl~ ~override~                                 	// Spore Explosion (disease)
  SAY NAME1 @1916
  READ_LONG  0x64 ab_off
  READ_SHORT 0x68 ab_num
  FOR(i=0; i<ab_num; i+=1) BEGIN
    WRITE_SHORT (ab_off+i*0x28+0x26) ~%rr#gassp%~                                   // use new projectile
  END
OUTER_SET $f_AddSecType(rr#gassp.spl) = DiseaseSecType

COPY ~atweaks/spl/plants/rr#gasd.spl~ ~override~                                 	// Spore Explosion (damages)
// Mykonid
COPY ~atweaks/spl/plants/rr#myck.spl~ ~override~                                    // Myconid Poisonous Skin
COPY ~atweaks/spl/plants/rr#pacif.spl~ ~override~                                 	// Myconid's pacificate spores
SAY NAME1 @1911
COPY ~atweaks/eff/plants/rr#pacif.eff~ ~override~                                 	// pacificate spores immunity
COPY ~atweaks/spl/plants/rr#hallu.spl~ ~override~                                 	// Myconid's hallucinating spores
SAY NAME1 @1912
COPY ~atweaks/eff/plants/rr#hallu.eff~ ~override~                                 	// hallucinating spores immunity
// Shambler
COPY ~atweaks/spl/plants/rr#suffo.spl~ ~override~                                 	// Shambler's suffocate spell
SAY NAME1 @1910
COPY ~atweaks/spl/plants/rr#shela.spl~ ~override~                                 	// Shambler's Electricity Absorption ability

/////////// Beasts ///////////
// Great Cat
COPY ~atweaks/spl/plants/rr#stlth.spl~ ~override~                                 	// Great Cat Hide in shadow at will (outdoor only)
SAY NAME1 #34120

/////////// Magical Beasts ///////////
// Ankheg
COPY ~atweaks/spl/plants/rr#acids.spl~ ~override~                                 	// Ankheg Acid Spit
  SAY NAME1 @1921
// Greater Basilisk
ADD_PROJECTILE ~atweaks/pro/plants/rr#gbpoi.pro~
COPY ~atweaks/spl/plants/rr#gbpoi.spl~ ~override~                                 	// Geater Basilisk Poison Breath
  SAY NAME1 @1914
  READ_LONG  0x64 ab_off
  READ_SHORT 0x68 ab_num
  FOR(i=0; i<ab_num; i+=1) BEGIN
    WRITE_SHORT (ab_off+i*0x28+0x26) %rr#gbpoi%                                     // use gaze projectile
  END
// Boalisk
COPY "atweaks/spl/undead/fl#mum.spl" ~override/rr#bogaz.spl~						// Clone of mummy disease
  SET gaze_pro = IDS_OF_SYMBOL (~PROJECTL~ ~gaze~) + 1
  SAY NAME1 @1918
  WRITE_SHORT 0x80 30 																// Gaze Range
  READ_LONG  0x64 ab_off
  READ_SHORT 0x68 ab_num
  FOR(i=0; i<ab_num; i+=1) BEGIN
    WRITE_SHORT (ab_off+i*0x28+0x26) %gaze_pro%                                     // use gaze projectile
  END
  FOR (i=LONG_AT 0x6a;i<SOURCE_SIZE;i+=0x30) BEGIN									// mummy disease (copy from undead component)
    READ_SHORT i type
    PATCH_IF type = 206 BEGIN
      SAY i + 0x4 @1023
    END
    PATCH_IF type = 139 BEGIN
      SAY i + 0x4 @1024
    END
  END
  //Already on the spl: display string: disease, immunity to cure spells, portrait icon, colour pulse
  FOR (i=1;i<6;++i) BEGIN
    LPF ADD_SPELL_EFFECT INT_VAR opcode = 78 target = 2 parameter1 = 2 parameter2 = 9 timing = 4 duration = i*7200 END //2 points of chr
  END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 139 target = 2 parameter1 = RESOLVE_STR_REF(@1925) timing = 4 duration = 5*7200 END //display a waring a day before insta-death
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 139 target = 2 parameter1 = RESOLVE_STR_REF(@1926) timing = 4 duration = 6*7200 - 1 END //display flavour text right before insta-death
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 13 target = 2 parameter2 = 512 timing = 4 duration = 6*7200 insert_point = "-1" END //death, disintegration-style
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 2 timing = 1 insert_point = "-1" STR_VAR resource = "rr#bogaz" END //Non-cumulativity
  LPF ALTER_EFFECT INT_VAR savingthrow = 0x4  END //save vs. petrification
  
//Spells and items that cure and protect against disease are patched at the end
OUTER_SET $f_AddSecType(rr#bogaz.spl) = DiseaseSecType

// Blink Dog
COPY ~atweaks/spl/rr#phase.spl~ ~override/rr#blink.spl~                            // Dimension Door (renewable), for blink dog
  SAY NAME1 #12082 SAY NAME2 #12082
  LAUNCH_PATCH_FUNCTION ~RR#SP2IN~ INT_VAR "rr#ctime" = "1" "rr#renew"   = "1" END // Execute the "spell to innate ablity" function
COPY ~atweaks/spl/rr#phasx.spl~ ~override/rr#blinx.spl~                            // Dimension Door, for blink dog
  SAY NAME1 #12082 SAY NAME2 #12082
  LAUNCH_PATCH_FUNCTION ~RR#SP2IN~ INT_VAR "rr#ctime" = "1" END   				   // Execute the "spell to innate ablity" function

// Moon Dog
COPY ~atweaks/spl/plants/rr#shade.spl~ override                          		   // Shades spell
  SAY NAME1 @1928
  LAUNCH_PATCH_FUNCTION ~RR#SP2IN~ INT_VAR "rr#rinvs"   = "1" END  
COPY ~atweaks/eff/plants/rr#shade.eff~ override                          		   // spell's effect
COPY ~atweaks/cre/plants/rr#shade.cre~ override                          		   // Summoning creature

COPY ~aTweaks/VVC/RR#PSHFT.VVC~ ~override~                                         // Plane Shift/Etherealness VVC animation
COPY ~aTweaks/BAM/RR#PSHFT.BAM~ ~override~                                         // Plane Shift/Etherealness BAM graphics
COPY ~aTweaks/WAV/RR#PSHFT.WAV~ ~override~                                         // Plane Shift/Etherealness sound

ACTION_IF !FILE_EXISTS_IN_GAME fl#atfiends1.mrk BEGIN
COPY ~aTweaks/SPL/RR#ETHER.SPL~ override		                                   // Etherealness (Moon Dog)
  SAY NAME1 @671 
  SAY NAME2 @671
  WRITE_BYTE 0x27 RR#ETHER                                                         // assign new secondary type
  READ_LONG  0x64 "abil_off"
  READ_SHORT 0x68 "abil_num"
  READ_LONG  0x6a "fx_off"
  FOR (index = 0 ; index < abil_num ; index = index + 1 ) BEGIN // cycle through abilities
    READ_SHORT  ("%abil_off%" + 0x1e + (0x28 * "%index%")) "abil_fx_num"
    READ_SHORT  ("%abil_off%" + 0x20 + (0x28 * "%index%")) "abil_fx_idx"
    FOR (index2 = 0 ; index2 < abil_fx_num ; index2 = index2 + 1) BEGIN
     READ_SHORT ("%fx_off%" +        (0x30 * ("%index2%" + "%abil_fx_idx%"))) "opcode"
     READ_LONG  ("%fx_off%" + 0x04 + (0x30 * ("%index2%" + "%abil_fx_idx%"))) "param1"
      PATCH_IF (("%opcode%" = 139) AND ("%param1%" = "23359")) BEGIN               // display string: "Ethereal"
       SAY ("%fx_off%" + 0x04 + (0x30 * ("%index2%" + "%abil_fx_idx%"))) @707      // Leaving the Ethereal Plane
      END
    END
  END

COPY ~aTweaks/EFF/RR#PFECU.EFF~ ~override~                                         // Etherealness protection from EVILCUTOFF effect
COPY ~aTweaks/EFF/RR#PFGCU.EFF~ ~override~                                         // Etherealness protection from GOODCUTOFF effect

COPY    ~aTweaks/SPL/RR#UNETH.SPL~ ~override~                                      // Etherealness removal spell
  READ_LONG  0x64 "abil_off"
  READ_SHORT 0x68 "abil_num"
  READ_LONG  0x6a "fx_off"
  FOR (index = 0 ; index < abil_num ; index = index + 1 ) BEGIN                    // cycle through abilities
    READ_SHORT  ("%abil_off%" + 0x1e + (0x28 * "%index%")) "abil_fx_num"
    READ_SHORT  ("%abil_off%" + 0x20 + (0x28 * "%index%")) "abil_fx_idx"
    FOR (index2 = 0 ; index2 < abil_fx_num ; index2 = index2 + 1) BEGIN
      READ_SHORT ("%fx_off%" +        (0x30 * ("%index2%" + "%abil_fx_idx%"))) "opcode"
       PATCH_IF ("%opcode%" = 221) BEGIN                             // effect #221: remove secondary type
        WRITE_LONG  ("%fx_off%" + 0x08 + (0x30 * ("%index2%" + "%abil_fx_idx%"))) RR#ETHER  // set the designated secondary type
       END
    END
  END
END
// Winter Wolf
COPY_EXISTING ~conecold.pro~ ~override/rr#fros.pro~  								// New projectile for frost breath
  WRITE_SHORT 0x204 200	// ~ 10 feet, maybe a little more
  WRITE_SHORT 0x206 200	// ~ 10 feet
ADD_PROJECTILE ~override/rr#fros.pro~
COPY ~atweaks/spl/plants/rr#frost.spl~ ~override~                                 	// Winter Wolf frost breath
  SAY NAME1 @1920
  READ_LONG  0x64 ab_off
  READ_SHORT 0x68 ab_num
  FOR(i=0; i<ab_num; i+=1) BEGIN
    WRITE_SHORT (ab_off+i*0x28+0x26) ~%rr#fros%~                                    // use new projectile
  END
// Hell Hound
COPY ~atweaks/spl/plants/rr#fireb.spl~ ~override~                                 	// Hell Hound Fire Breath
  SAY NAME1 @1919

// Dread Wolf: Troll likes spells
COPY ~atweaks\spl\fl#die.spl~  "override/fl#dwdie.spl"
	LPF ALTER_EFFECT INT_VAR match_opcode = 143 STR_VAR resource = "rr#dwdie" END
COPY ~atweaks\spl\fl#back.spl~ "override/fl#dwbac.spl"
	LPF ALTER_EFFECT STR_VAR match_resource = "REVNREG" resource = "rr#dwreg" END
COPY ~atweaks\spl\fl#itm.spl~  "override/fl#dwitm.spl"

// devour brain immunity effect
COPY ~aTweaks/EFF/RR#IDIM1.EFF~ ~override~                                 			// effect file which grants immunity to the inteligence drain opcode
     ~aTweaks/EFF/RR#IDIM2.EFF~ ~override~                                 			// effect file which prevents the inteligence drained icon from showing

COPY ~atweaks/eff/rr#idim1.eff~ ~override/fl#idim3.eff~                    			//Immunity to display string: int drain
  WRITE_LONG 0x10 267
  WRITE_LONG 0x1c 32089 //devour brain
  


//////////////////////////////
// Cloned spells
//////////////////////////////

// Spore Colony
COPY_EXISTING ~spin730.spl~ ~override/rr#mking.spl~  								// Basilsk Gaze
  LPF DELETE_EFFECT INT_VAR match_opcode = 177 END
  LPF ADD_SPELL_EFFECT INT_VAR opcode = 177 target = 1 duration = 200 timing = 0 parameter1 = 0 parameter2 = 2 STR_VAR resource = "rr#mking" END
COPY_EXISTING ~SUFUNGUS.EFF~ ~override/rr#mking.eff~  								// Basilsk Gaze
  WRITE_ASCII 0x30 "ICMYC02" (8)

// Basilisk
COPY_EXISTING ~spwi604.spl~ ~override/rr#pgaze.spl~  								// Basilsk Gaze
  SET gaze_pro = IDS_OF_SYMBOL (~PROJECTL~ ~gaze~) + 1
  SAY NAME1 @1913
  WRITE_ASCII 0x10 "none" #8														// no casting animation
  WRITE_SHORT 0x22 0 																// Gaze Range
  WRITE_SHORT 0x80 30 																// Gaze Range
  READ_LONG  0x64 ab_off
  READ_SHORT 0x68 ab_num
  FOR(i=0; i<ab_num; i+=1) BEGIN
    WRITE_SHORT (ab_off+i*0x28+0x26) %gaze_pro%                                     // use gaze projectile
  END
  LPF ALTER_EFFECT INT_VAR savingthrow = 4 END
  LAUNCH_PATCH_FUNCTION ~RR#SP2IN~ 
  INT_VAR "rr#ctime" = "0" "rr#rinvs"   = "1" "rr#renew"   = "1" END                // Execute the "spell to innate ablity" function

// Moon Dog
COPY_EXISTING ~SPIN698.spl~ override												// Moon Dog Improved invisibility
  LAUNCH_PATCH_FUNCTION ~RR#SP2IN~ INT_VAR "rr#ctime" = "1" "rr#renew"  = "1" END
COPY_EXISTING ~SPIN891.spl~ override												// Moon Dog Howl
  LAUNCH_PATCH_FUNCTION ~RR#SP2IN~ INT_VAR "rr#ctime" = "1" "rr#rinvs"   = "1" "rr#renew"  = "1" END
  SET NOT_PARTY = IDS_OF_SYMBOL (~PROJECTL~ ~INAREANP~) + 1
  READ_LONG  0x64 ab_off
  READ_SHORT 0x68 ab_num
  FOR(i=0; i<ab_num; i+=1) BEGIN
    WRITE_SHORT (ab_off+i*0x28+0x26) %NOT_PARTY%                                     	// use Instant Area (Not Party) projectile instead of Instant Area
  END
  
COPY_EXISTING ~MOOND8.eff~ override														// Moon Dog Howl Damages 1d4+4 (5-8)
  WRITE_LONG 0x1C 4
  WRITE_LONG 0x38 1
  WRITE_LONG 0x3C 4
COPY_EXISTING ~SPIN696.spl~ override													// Moon Dog Sight
  LAUNCH_PATCH_FUNCTION ~RR#SP2IN~ INT_VAR "rr#ctime" = "1" "rr#rinvs"   = "1" "rr#renew"  = "1" END
COPY_EXISTING ~SPIN699.spl~ override													// Moon Dog Lick
  LAUNCH_PATCH_FUNCTION ~RR#SP2IN~ INT_VAR "rr#ctime" = "99" "rr#rinvs"   = "1" "rr#renew"  = "1" END  
  LPF ADD_SPELL_EFFECT INT_VAR insert_point = "-1" opcode = 206 target = 2 duration = 2400 STR_VAR resource = "SPIN699" END // One time per Ally per 8 hours

// Joolon
COPY_EXISTING ~SPPR416.spl~ "override/rr#scare.spl"										// Joolon Scare ability
  LAUNCH_PATCH_FUNCTION ~RR#SP2IN~ INT_VAR "rr#ctime" = "1" "rr#rinvs"   = "1" "rr#renew"  = "1" END
  WRITE_ASCII 0x10 "PANTH02" (8)
  WRITE_SHORT 0x22 0
COPY_EXISTING ~SPWI201.spl~ "override/rr#blur.spl"										// Joolon Blur ability
  LAUNCH_PATCH_FUNCTION ~RR#SP2IN~ INT_VAR "rr#ctime" = "1" "rr#rinvs"   = "1" "rr#renew"  = "1" END
  WRITE_ASCII 0x10 "LEOPA03" (8)
  WRITE_SHORT 0x22 0

//////////////////////////////
// New items
//////////////////////////////

/////////// Plants: Fungi & Shamblers ///////////
COPY_EXISTING ~HELMNOAN.itm~ ~override/RR#plant.itm~                               // plant traits "helmet" (shared by all PLANTS, needs to be a helmet in order to grant critical hit protection)
LAUNCH_PATCH_FUNCTION ~plant_traits~ END                                     	   // add plant immunity

COPY_EXISTING ~RR#plant.itm~ ~override/RR#shamb.itm~                               // Shambler immunities
LAUNCH_PATCH_FUNCTION vorpal_immunity END                                          // grant vorpal immunity
LAUNCH_PATCH_FUNCTION electrical_spell_immunities END							   // Electrical spell immunities
LAUNCH_PATCH_FUNCTION fire_spell_immunities END							   		   // Electrical spell immunities

//Myconid's King
COPY ~atweaks/itm/plants/rr#myc6.itm~ ~override~                                    // Myconid King melee attack: 6d4 (+2)
  LPF set_enchantment INT_VAR enchantment = 2 END
//Shambling Mound
COPY ~atweaks/itm/plants/rr#sham6.itm~ ~override~                                   // Shambling Mount melee attack: 2d6 (+4)
  LPF set_enchantment INT_VAR enchantment = 4 END
COPY_EXISTING "trollreg.itm" "override/rr#reg1.itm"
  WRITE_SHORT 0x1c 3
  LPF ALTER_EFFECT INT_VAR match_opcode = 98 parameter1 = 2 parameter2 = 1 END
  SAY NAME1 #1292
COPY_EXISTING "trollreg.itm" "override/rr#reg2.itm"
  WRITE_SHORT 0x1c 3
  LPF ALTER_EFFECT INT_VAR match_opcode = 98 parameter1 = 2 parameter2 = 2 END
  SAY NAME1 #1292
COPY_EXISTING "trollreg.itm" "override/rr#reg3.itm"
  WRITE_SHORT 0x1c 3
  LPF ALTER_EFFECT INT_VAR match_opcode = 98 parameter1 = 2 parameter2 = 3 END
  SAY NAME1 #1292

// Give devour brain immunity
ACTION_FOR_EACH ~file~ IN
                ~rr#myc6~                                                  			// Myconid melee weapon
                ~rr#sham6~                                                 			// Shambler melee weapon
BEGIN
  ACTION_IF FILE_EXISTS_IN_GAME ~%file%.itm~ BEGIN
    COPY_EXISTING ~%file%.itm~ ~override~
      PATCH_IF (%SOURCE_SIZE% > 0x71) THEN BEGIN                           			// file size sanity check (filters out 0 byte files i.e. ALLOW_MISSING)
        PATCH_FOR_EACH eff IN rr#idim1 rr#idim2 fl#idim3 BEGIN
         PATCH_FOR_EACH race IN 164 145 BEGIN
		  LPF ADD_ITEM_EQEFFECT
            INT_VAR
              opcode = 177       	 //use eff
              target = 1
              timing = 2
              parameter1 = "%race%"
              parameter2 = 4     	 // race.ids
            STR_VAR
              resource = EVAL "%eff%"
			END
		 END
        END
      END
    BUT_ONLY
  END
END
// Std Myconids
COPY_EXISTING ~rr#myc6.itm~ ~override/rr#myc5.itm~                            	  // Myconid King melee attack: 6d4
  LPF set_enchantment END
	LPF ALTER_ITEM_HEADER INT_VAR dicenumber = 5 END
	LPF DELETE_EFFECT INT_VAR match_opcode = 232 END

//Lesser Shambler
COPY_EXISTING ~rr#sham6.itm~ ~override/rr#sham4.itm~                      	  	  // Lesser Shambler melee attack: 2d4
  LPF set_enchantment INT_VAR enchantment = 2 END
	LPF ALTER_ITEM_HEADER INT_VAR dicesize = 4 END
	WRITE_SHORT 0x80 1	// Range 1 (M size)
//Greater Shambler
COPY_EXISTING ~rr#sham6.itm~ ~override/rr#sham8.itm~                      		  // Greater Shambler melee attack: 2d8
  LPF set_enchantment INT_VAR enchantment = 5 END
	LPF ALTER_ITEM_HEADER INT_VAR dicesize = 8 END


/////////// Beasts ///////////

// Wild Dog
COPY_EXISTING "P1-8.itm" "override/rr#widog.itm"                                   // Wild Dog melee attack: 1d4
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 4 dicenumber = 1 END
// War Dog
COPY_EXISTING "P1-8.itm" "override/rr#wadog.itm"                                   // War Dog melee attack: 2d4
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 4 dicenumber = 2 END
// Wolf
COPY_EXISTING "rr#widog.itm" "override/rr#wolf.itm"                                 // Wolf melee attack: 1d4+1
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 6 dicenumber = 1 damage_bonus = 1 END
// Dire Wolf
COPY_EXISTING "P1-8.itm" "override/rr#wolfd.itm"                                   // Dire Wolf melee attack: 2d4 (+1)
  LPF set_enchantment END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 4 dicenumber = 2 END
// Black Bear
COPY ~atweaks/itm/plants/rr#bear.itm~ ~override/rr#bbear.itm~                       // Black Bear melee attack: 1d4
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 3 dicenumber = 1 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 146 STR_VAR resource = "rr#bbear" END
COPY ~atweaks/spl/plants/rr#const.spl~ ~override/rr#bbear.spl~                      // Constrict spell Black bear (save = 0)
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@674) END
  LPF ALTER_EFFECT INT_VAR match_opcode = 177 STR_VAR resource = "rr#bbear" END
COPY ~atweaks/eff/plants/rr#const.eff~ ~override/rr#bbear.eff~                      // Immunity to Constrict spell
  WRITE_ASCII 0x30 "rr#bbear"
COPY_EXISTING "B1-6.itm" "override/rr#bbea2.itm"
// Brown Bear
COPY ~atweaks/itm/plants/rr#bear.itm~ ~override/rr#brbea.itm~                       // Brown bear attack: 1d6
  LPF set_enchantment END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 6 dicenumber = 1 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 146 savebonus = "-1" STR_VAR resource = "rr#brbea" END
COPY ~atweaks/spl/plants/rr#const.spl~ ~override/rr#brbea.spl~                      // Constrict spell
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@674) END
  LPF ALTER_EFFECT INT_VAR match_opcode = 177 STR_VAR resource = "rr#brbea" END
  LPF ALTER_EFFECT INT_VAR match_opcode = 12 dicesize = 6 END
COPY ~atweaks/eff/plants/rr#const.eff~ ~override/rr#brbea.eff~                      // Immunity to Constrict spell
  WRITE_ASCII 0x30 "rr#brbea"
COPY_EXISTING "B1-8.itm" "override/rr#brbe2.itm"
  LPF set_enchantment END
// Cave Bear
COPY ~atweaks/itm/plants/rr#bear.itm~ ~override/rr#cabea.itm~                       // Cave Bear melee attack: 1d8
  LPF set_enchantment INT_VAR enchantment = 2 END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 8 dicenumber = 1 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 146 savebonus = "-2" STR_VAR resource = "rr#cabea" END
COPY ~atweaks/spl/plants/rr#const.spl~ ~override/rr#cabea.spl~                      // Constrict spell
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@674) END
  LPF ALTER_EFFECT INT_VAR match_opcode = 177 STR_VAR resource = "rr#cabea" END
  LPF ALTER_EFFECT INT_VAR match_opcode = 12 dicesize = 8 END
COPY ~atweaks/eff/plants/rr#const.eff~ ~override/rr#cabea.eff~                      // Immunity to Constrict spell
  WRITE_ASCII 0x30 "rr#cabea"
COPY_EXISTING "B1-12.itm" "override/rr#cabe2.itm"
  LPF set_enchantment INT_VAR enchantment = 2 END
// Polar Bear
COPY ~atweaks/itm/plants/rr#bear.itm~ ~override/rr#pobea.itm~                       // Polar Bear melee attack: 1d12
  LPF set_enchantment INT_VAR enchantment = 3 END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 10 dicenumber = 1 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 146 savebonus = "-3" STR_VAR resource = "rr#pobea" END
COPY ~atweaks/spl/plants/rr#const.spl~ ~override/rr#pobea.spl~                      // Constrict spell
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@674) END
  LPF ALTER_EFFECT INT_VAR match_opcode = 177 STR_VAR resource = "rr#pobea" END
  LPF ALTER_EFFECT INT_VAR match_opcode = 12 dicesize = 6 savingthrow = 3 END
COPY ~atweaks/eff/plants/rr#const.eff~ ~override/rr#pobea.eff~                      // Immunity to Constrict spell
  WRITE_ASCII 0x30 "rr#pobea"
COPY_EXISTING "B1-12.itm" "override/rr#pobe2.itm"
  LPF set_enchantment INT_VAR enchantment = 3 END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 6 dicenumber = 2 END
// Giant Bear
COPY ~atweaks/itm/plants/rr#bear.itm~ ~override/rr#gibea.itm~                       // Giant Bear melee attack: 2d8
  LPF set_enchantment INT_VAR enchantment = 4 END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 6 dicenumber = 2 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 146 savebonus = "-4" STR_VAR resource = "rr#gibea" END
COPY ~atweaks/spl/plants/rr#const.spl~ ~override/rr#gibea.spl~                      // Constrict spell
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@674) END
  LPF ALTER_EFFECT INT_VAR match_opcode = 177 STR_VAR resource = "rr#gibea" END
  LPF ALTER_EFFECT INT_VAR match_opcode = 12 dicesize = 8 savingthrow = 3 END
COPY ~atweaks/eff/plants/rr#const.eff~ ~override/rr#gibea.eff~                      // Immunity to Constrict spell
  WRITE_ASCII 0x30 "rr#gibea"
COPY_EXISTING "B1-12.itm" "override/rr#gibe2.itm"
  LPF set_enchantment INT_VAR enchantment = 4 END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 8 dicenumber = 2 END
// Cheettah
COPY "atweaks/itm/plants/rr#gcat.itm" "override/rr#cheet.itm"                       // Cheetah melee attack: 1d4
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 2 END
COPY_EXISTING "p1-8.itm" "override/rr#chee2.itm"
// Leopard
COPY "atweaks/itm/plants/rr#gcat.itm" "override/rr#leop.itm"                        // Leopard melee attack: 1d4
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 3 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 12 probability1 = 32 dicesize = 4 END
COPY_EXISTING "p1-6.itm" "override/rr#leop2.itm"
// Panther
COPY "atweaks/itm/plants/rr#gcat.itm" "override/rr#panth.itm"                       // Panther melee attack: 1d4+1
  LPF set_enchantment END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 3 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 12 probability1 = 24 dicesize = 4 END
COPY_EXISTING "p1-8.itm" "override/rr#pant2.itm"
  LPF set_enchantment END
// Guenhwyvar special case
COPY_EXISTING "rr#panth.itm" "override/F_GUECLW.itm"                       			// Guenhwyvar, drizzt panther (drizzt saga) melee attack: 1d8+3
  LPF set_enchantment INT_VAR enchantment = 3 END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 8 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 12 probability1 = 32 dicesize = 8 thac0_bonus = 3 damage_bonus = 3 END
COPY_EXISTING "p2-16.itm" "override/RR#GUEN2.itm"
  LPF set_enchantment INT_VAR enchantment = 3 END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 6 END
// Jaguar
COPY "atweaks/itm/plants/rr#gcat.itm" "override/rr#Jagu.itm"                         // Jaguar melee attack: 1d4+1
  LPF set_enchantment END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 3 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 12 parameter1 = 2 probability1 = 24 dicesize = 4 END
COPY_EXISTING "p1-8.itm" "override/rr#Jagu2.itm"
  LPF set_enchantment END
// Lion
COPY "atweaks/itm/plants/rr#gcat.itm" "override/rr#lion.itm"                        // Lion melee attack: 1d6
  LPF set_enchantment END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 4 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 12 parameter1 = 2 probability1 = 32 dicesize = 6 END
COPY_EXISTING "p1-10.itm" "override/rr#lion2.itm"
  LPF set_enchantment END
// Lion, Mountain
COPY "atweaks/itm/plants/rr#gcat.itm" "override/rr#mlion.itm"                        // Mountain Lion melee attack: 1d6
  LPF set_enchantment END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 3 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 12 probability1 = 32 dicesize = 4 END
COPY_EXISTING "p1-6.itm" "override/rr#mlio2.itm"
  LPF set_enchantment END
// Lion, Spotted
COPY "atweaks/itm/plants/rr#gcat.itm" "override/rr#slion.itm"                        // Spotted Lion melee attack: 1d6+1
  LPF set_enchantment INT_VAR enchantment = 2 END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 4 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 12 probability1 = 32 dicesize = 8 END
COPY_EXISTING "p1-12.itm" "override/rr#slio2.itm"
  LPF set_enchantment INT_VAR enchantment = 2 END
// Tiger, Wild
COPY "atweaks/itm/plants/rr#gcat.itm" "override/rr#witig.itm"                        // Wild Tiger melee attack: 1d6+1
  LPF set_enchantment END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 4 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 12 parameter1 = 1 probability1 = 32 dicesize = 8 END
COPY_EXISTING "p1-10.itm" "override/rr#witi2.itm"
  LPF set_enchantment END
// Tiger, Saber-tooth (Smilodon)
COPY "atweaks/itm/plants/rr#gcat.itm" "override/rr#smilo.itm"                        // Smilodon melee attack: 1d6+2
  LPF set_enchantment INT_VAR enchantment = 2 END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 4 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 12 parameter1 = 1 probability1 = 32 dicesize = 8 END
COPY_EXISTING "p2-16.itm" "override/rr#smil2.itm"
  LPF set_enchantment INT_VAR enchantment = 2 END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 6 END
// Snake, Poison
COPY "atweaks/itm/plants/rr#snak1.itm" "override"                        			// Snake melee attack: 1
// Snake, Poison (Giant)
COPY "atweaks/itm/plants/rr#snak1.itm" "override/rr#snak2.itm"                       // Snake melee attack: 1d3
  LPF set_enchantment END
  LPF ALTER_ITEM_HEADER INT_VAR dicenumber = 1 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 25 parameter1 = 4 duration = 30 savebonus = "-3" END


/////////// Magical Beasts ///////////

// Ankheg
COPY ~atweaks/itm/plants/rr#ankhg.itm~ ~override~                                   // Ankheg melee attack: 3d6 + 1d6 acid + enchantment level (+2)
  LPF set_enchantment INT_VAR enchantment = 2 END
COPY_EXISTING ~ANKHEG1.itm~ ~override~                                   			// Ankheg Range attack: 3d6 + 1d6 acid + enchantment level (+2)
  LPF ~DELETE_ITEM_EQEFFECT~ INT_VAR "opcode_to_delete" = "233" END                 // avoid supurious opcode 233
  LPF set_enchantment INT_VAR enchantment = 2 END
  LPF ALTER_ITEM_HEADER INT_VAR dicenumber = 0 damage_bonus = 0 charges = 1 END
  LPF DELETE_ITEM_EFFECT INT_VAR "opcode_to_delete" = "-1" END                 		// effect: -1 (all effects)
  LPF ADD_ITEM_EFFECT INT_VAR opcode = 146 target = 2 timing = 0 parameter2 = 1 probability1 = 100 STR_VAR resource = "rr#acids" END
// Basilisk
COPY_EXISTING "P1-8.itm" "override/rr#lbasi.itm"                                   // Lesser Basilisk melee attack: 1d10 (+2)
  LPF set_enchantment INT_VAR enchantment = 2 END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 10 dicenumber = 1 END
// Basilisk, Greater
COPY ~atweaks/itm/plants/rr#gbas1.itm~ ~override~                       // Basilisk melee (claw) attack: 1d6 + 5 poison (+3)
  LPF set_enchantment INT_VAR enchantment = 3 END
COPY ~atweaks/itm/plants/rr#gbas2.itm~ ~override~                       // Basilisk melee (bite) attack: 2d8 (+3)
  LPF set_enchantment INT_VAR enchantment = 3 END
// Snake, Boalisk
COPY ~atweaks/itm/plants/rr#bear.itm~ ~override/rr#snak3.itm~                       // Polar Bear melee attack: 1d12
  LPF set_enchantment END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 3 dicenumber = 1 damage_type = 1 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 146 probability1 = 100 savebonus = "0" STR_VAR resource = "rr#snak3" END
COPY ~atweaks/spl/plants/rr#const.spl~ ~override/rr#snak3.spl~                      // Constrict spell
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF(@674) END
  LPF ALTER_EFFECT INT_VAR match_opcode = 177 STR_VAR resource = "rr#snak3" END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 6 dicenumber = 1 damage_bonus = 1 END
COPY ~atweaks/eff/plants/rr#const.eff~ ~override/rr#snak3.eff~                      // Immunity to Constrict spell
  WRITE_ASCII 0x30 "rr#pobea"
// Blink Dog
COPY_EXISTING "P1-8.itm" "override/rr#bldog.itm"                                   // Blink Dog melee attack: 1d6 (+1)
  LPF set_enchantment END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 6 dicenumber = 1 END
// Spectral Hound
COPY ~atweaks/itm/plants/rr#spdog.itm~ ~override~                                   // Spectral Hound melee attack: 1d10 (+2)
  LPF set_enchantment INT_VAR enchantment = 2 END
// Hell Hound
COPY ~atweaks/itm/plants/rr#hhoun.itm~ ~override~                                   // Hell Hound melee attack: 1d8 +1d2 (+2)
  LPF set_enchantment INT_VAR enchantment = 2 END
// Dog, Moon
COPY_EXISTING "P1-8.itm" "override/rr#mdog.itm"                                   // Moon Dog melee attack: 3d4
  LPF set_enchantment INT_VAR enchantment = 3 END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 4 dicenumber = 3 damage_bonus = 0 END
// Zombie Wolf
COPY_EXISTING "rr#widog.itm" "override/rr#zwolf.itm"                                 // Wolf melee attack: 1d4+1
  LPF set_enchantment END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 4 dicenumber = 1 damage_bonus = 1 END
// Worg 
COPY_EXISTING "P1-8.itm" "override/rr#worg.itm"                                    // Worg melee attack: 2d4 
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 4 dicenumber = 2 END
  WRITE_BYTE 0x88 4	// Dice size
  WRITE_BYTE 0x8a 2	// Dice thrown
// Dread Wolf
COPY ~atweaks/itm/plants/rr#dwolf.itm~ ~override~                                   // Dread Wolf melee attack: 1d10 (+1)
  LPF set_enchantment END
COPY_EXISTING "trollreg.itm" "override/rr#dwreg.itm"
  WRITE_SHORT 0x1c 3
  LPF ALTER_EFFECT INT_VAR match_opcode = 98 parameter1 = 2 parameter2 = 3 END
  SAY NAME1 #1292
COPY "atweaks\itm\undead\fl#Revn1.itm" "override/rr#dwdie.itm"
  LPF DELETE_EFFECT INT_VAR match_opcode = 27 END 					  			// not immune to Acid
  LPF DELETE_EFFECT INT_VAR match_opcode = 86 END									// not immune to slashing (dismember)
// Winter Wolf
COPY ~atweaks/itm/plants/rr#wwolf.itm~ ~override~                                   // Winter Wolf melee attack: 1d6 +1d2 (+1)
  LPF set_enchantment END
// Vampiric Wolf
COPY ~atweaks/itm/plants/rr#vwolf.itm~ ~override~                                   // Vampiric Wolf melee attack: 3d4 (+2)
  LPF set_enchantment INT_VAR enchantment = 2 END

COPY ~atweaks/itm/plants/rr#SPRNT.itm~ ~override~                                   // Cheetah Sprint
// Giant Lynx
COPY "atweaks/itm/plants/rr#gcat.itm" "override/rr#glynx.itm"                        // Great Lynx melee attack: 1d2
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 2 END
  LPF ALTER_EFFECT INT_VAR match_opcode = 12 probability1 = 19 dicesize = 3 END
  WRITE_BYTE 0x88 2	// Dice size
  WRITE_BYTE 0xec 19	// Rake %
  WRITE_LONG 0xfa 3	// Dice thrown
COPY_EXISTING "p1-2.itm" "override/rr#glyn2.itm"
// joolon
COPY "atweaks/itm/plants/rr#gcat.itm" "override/rr#jool.itm"                        // Joolon melee attack: 1d10 (+2)
  LPF set_enchantment INT_VAR enchantment = 3 END
  LPF DELETE_EFFECT INT_VAR match_opcode = 12 END
  LPF ALTER_ITEM_HEADER INT_VAR dicesize = 8 END
COPY_EXISTING "p1-10.itm" "override/rr#jool2.itm"
  LPF set_enchantment INT_VAR enchantment = 3 END



//////////////////////////
// Creature modifications: Plants
//////////////////////////

// Gas Spore

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~behgas01~                                                             // Gas Spore

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "126" END     // mark opcode #126 (Movement Modifier) for deletion
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "176" END     // mark opcode #176 (Movement Modifier II) for deletion
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bsimm" = "1"                                                             	   // Backstab immunity
"rr#infra" = "1"                                                             	   // Infravision
"newmove"  = "1"                                                                   // new movement rate
"newxpv"   = "120"                                                                 // new XP value
"newhp"    = "1"                                                                   // new hit point value
"newac"    = "9"                                                                   // new Armor Class value
"newth"    = "20"                                                                  // new THAC0 value
"newapr"   = "0"                                                                   // new number of attacks per round
"newsvd"   = "20"                                                                  // new Save vs. Death
"newsvw"   = "20"                                                                  // new Save vs. Wand
"newsvp"   = "20"                                                                  // new Save vs. Polymorph
"newsvb"   = "20"                                                                  // new Save vs. Breath
"newsvs"   = "20"                                                                  // new Save vs. Spell
"newlvl1"  = "1"                                                                   // new level (first class)
"newstr"   = "1"                                                                   // new Strength value
"newint"   = "1"                                                                   // new Intelligence value
"newwis"   = "1"                                                                   // new Wisdom value
"newdex"   = "1"                                                                   // new Dexterity value
"newcon"   = "1"                                                                   // new Constitution value
"newchr"   = "1"                                                                   // new Charisma value
"newmor"   = "8"                                                                   // new morale value
"newrace"  = "164"                                                                 // new race (MYCONID)
"newclass" = "255"                                                                 // new class (NO_CLASS)
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforced creature 1 (uses strict PnP values)
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "RR#GASSP"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "GSPORE"                                                            // third AI script name
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION hover_immunities END                                         // grant immunities to ground-based spells
LAUNCH_PATCH_FUNCTION plant_traits END                                         	   // grant plants traits
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "40" END      // remove spurious Slow opcode

// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// spore colony - change Race for Myconid

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~ICFUNGUS~                                                             // Spore Colony
            ~ICFUNG02~                                                             // Spore Colony

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REMOVE_CRE_ITEM ~UMBER01~								                           // confusion Immunity done by opcode
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"newrace"  = "164"                                                                 // new race (MYCONID)
"newclass" = "255"                                                                 // new class (NO_CLASS)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforced creature 1 (uses strict PnP values)
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "101" END     // remove spurious opcode protections
LAUNCH_PATCH_FUNCTION plant_traits END                                         	   // grant plants traits
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Myconid

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~ICMYC01~                                                              // Myconid
            ~BSMYCON1~                                                             // Myconid
            ~L#MYCMY~                                                              // Myconid
            ~YSMYC01~                                                              // Myconid

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~RR#plant~ #0 #0 #0 ~UNDROPPABLE~ ~HELMET~                        // add plant traits
REPLACE_CRE_ITEM ~RR#myc5~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                  // replace default weapon with a more PnP accurate weapon
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#pacif~ #0 ~innate~ ( 5 )                                   // adds 5x Pacifier Spores
ADD_MEMORIZED_SPELL ~rr#hallu~ #0 ~innate~ ( 5 )                                   // adds 5x Hallucinator Spores
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bsimm" = "1"                                                             	   // Backstab immunity
"rr#infra" = "1"                                                             	   // Infravision
"newmove"  = "7"                                                                   // new movement rate
"newxpv"   = "420"                                                                 // new XP value
"newhp"    = "40"                                                                  // new hit point value
"newac"    = "10"                                                                  // new Armor Class value
"newth"    = "15"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "11"                                                                  // new Save vs. Death
"newsvw"   = "13"                                                                  // new Save vs. Wand
"newsvp"   = "12"                                                                  // new Save vs. Polymorph
"newsvb"   = "13"                                                                  // new Save vs. Breath
"newsvs"   = "14"                                                                  // new Save vs. Spell
"newlvl1"  = "5"                                                                   // new level (first class)
"newstr"   = "16"                                                                  // new Strength value
"newint"   = "8"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "11"                                                                  // new Dexterity value
"newcon"   = "15"                                                                  // new Constitution value
"newchr"   = "10"                                                                  // new Charisma value
"newmor"   = "12"                                                                  // new morale value
"newrace"  = "164"                                                                 // new race (MYCONID)
"newclass" = "255"                                                                 // new class (NO_CLASS)
"newalign" = "18"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforced creature 1 (uses strict PnP values)
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   //  Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "RR#myco"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "UMBHUL01"                                                          // Myconid spores script (use umber hulk gaze)
"script08"   = "DW2MC3MO"                                                          // Stratagems melee script
"script09"   = "YSMYC01"                                                           // ??
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "101" END     // remove spurious opcode protections
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Myconid King

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~ICMYC02~                                                              // Myconid King
            ~YSMYC02~                                                              // Myconid King

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~RR#plant~ #0 #0 #0 ~UNDROPPABLE~ ~HELMET~                        // add plant traits
REPLACE_CRE_ITEM ~RR#myc6~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                  // replace default weapon with a more PnP accurate weapon
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#pacif~ #0 ~innate~ ( 6 )                                   // adds 6x Pacifier Spores
ADD_MEMORIZED_SPELL ~rr#hallu~ #0 ~innate~ ( 6 )                                   // adds 6x Hallucinator Spores
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bsimm" = "1"                                                             	   // Backstab immunity
"rr#infra" = "1"                                                             	   // Infravision
"newmove"  = "7"                                                                   // new movement rate
"newxpv"   = "650"                                                                 // new XP value
"newhp"    = "48"                                                                  // new hit point value
"newac"    = "10"                                                                  // new Armor Class value
"newth"    = "15"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "11"                                                                  // new Save vs. Death
"newsvw"   = "13"                                                                  // new Save vs. Wand
"newsvp"   = "12"                                                                  // new Save vs. Polymorph
"newsvb"   = "13"                                                                  // new Save vs. Breath
"newsvs"   = "14"                                                                  // new Save vs. Spell
"newlvl1"  = "6"                                                                   // new level (first class)
"newstr"   = "17"                                                                  // new Strength value
"newint"   = "10"                                                                  // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "11"                                                                  // new Dexterity value
"newcon"   = "16"                                                                  // new Constitution value
"newchr"   = "12"                                                                  // new Charisma value
"newmor"   = "13"                                                                  // new morale value
"newrace"  = "164"                                                                 // new race (MYCONID)
"newclass" = "255"                                                                 // new class (NO_CLASS)
"newalign" = "18"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforced creature 1 (uses strict PnP values)
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "RR#myco"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "UMBHUL01"                                                          // Myconid spores script (use umber hulk gaze)
"script08"   = "YSMYC02"                                                           // ???
"script09"   = "DW2MC3MO"                                                          // Stratagems melee script
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "101" END     // remove spurious opcode protections
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Shambler, Lesser

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~SMOUND01~                                                             // Lesser Shambler
            ~SMOUNDSU~                                                             // Lesser Shambler - Staff of the woodlands +4
            ~RR#SHM01~                                                             // Lesser Shambler - RR_mod
            ~SSHAMB~                                                               // Lesser Shambler - RR_mod
            ~SUMOUND~                                                              // Lesser Shambler - RR_mod

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REMOVE_CRE_ITEM ~IMMUNE2~  							                           	   // remove IMMUNE2 (+1 Weapon immunity)
REMOVE_CRE_ITEM ~RING95~  							                           	   // remove Ring95 (undead immunity)
REPLACE_CRE_ITEM ~RR#SHAMB~ #0 #0 #0 ~UNDROPPABLE~ ~HELMET~                        // add Shambler immunity
REPLACE_CRE_ITEM ~RR#SHAM4~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~RR#reg1~ #0 #0 #0 ~UNDROPPABLE~ ~BELT~                           // replace generic regeneration item with aTweaks' version
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#ecncl~ #0 ~innate~ ( 1 )                                   // adds 1x Elemental Concealment
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bump"  = "1"                                                                   // NPC bump (allows the creature to movee others out of its way)
"rr#bsimm" = "1"                                                             	   // Backstab immunity
"rr#infra" = "1"                                                             	   // Infravision
"newmove"  = "5"                                                                   // new movement rate
"newxpv"   = "6000"                                                                // new XP value
"newhp"    = "64"                                                                  // new hit point value
"newac"    = "2"                                                                   // new Armor Class value
"newth"    = "13"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "10"                                                                  // new Save vs. Death
"newsvw"   = "12"                                                                  // new Save vs. Wand
"newsvp"   = "11"                                                                  // new Save vs. Polymorph
"newsvb"   = "12"                                                                  // new Save vs. Breath
"newsvs"   = "13"                                                                  // new Save vs. Spell
"newlvl1"  = "8"                                                                   // new level (first class)
"newfr"	   = "100"                                                                 // new Resist Fire value
"newcr"	   = "50"                                                                  // new Resist Cold value
"newer"	   = "127"                                                                 // new Resist Electricity value
"newrs"	   = "25"                                                                  // new Resist Slashing
"newrc"	   = "100"                                                                 // new Resist Crushing
"newrp"	   = "25"                                                                  // new Resist Piercing
"newstr"   = "18"                                                                  // new Strength value
"newint"   = "7"                                                                   // new Intelligence value
"newwis"   = "7"                                                                   // new Wisdom value
"newdex"   = "10"                                                                  // new Dexterity value
"newcon"   = "18"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newmor"   = "17"                                                                  // new morale value
"newgen"   = "5"                                                                   // new general value
"newrace"  = "145"                                                                 // new race (ELEMENTAL)
"newclass" = "188"                                                                 // new class (ELEMENTAL_EARTH)
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforced creature 1 (uses strict PnP values)
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "RR#SHAMB"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MC3GE"                                                          // Stratagems melee script
"script08"   = "DW2MC3MO"                                                          // Stratagems melee script
"script09"   = "RR#SHM"                                                            // RR script
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "101" END     // remove spurious opcode protections
LAUNCH_PATCH_FUNCTION DELETE_CRE_EFFECT INT_VAR opcode_to_delete = "98" END        // mark opcode #98 (Regeneration) for deletion
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Shambling Mount

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~GLOBSHAM~                                                             // Shambling Mount
            ~SMOUND02~                                                             // Greater Shambler - IR mod - Staff of the woodlands +4

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REMOVE_CRE_ITEM ~IMMUNE2~  							                           	   // remove IMMUNE2 (+1 Weapon immunity)
REMOVE_CRE_ITEM ~RING95~  							                           	   // remove Ring95 (undead immunity)
REPLACE_CRE_ITEM ~RR#SHAMB~ #0 #0 #0 ~UNDROPPABLE~ ~HELMET~                        // add Shambler immunity
REPLACE_CRE_ITEM ~RR#SHAM6~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~RR#reg2~ #0 #0 #0 ~UNDROPPABLE~ ~BELT~                           // replace generic regeneration item with aTweaks' version
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#ecncl~ #0 ~innate~ ( 1 )                                   // adds 1x Elemental Concealment
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bump"  = "1"                                                                   // NPC bump (allows the creature to movee others out of its way)
"rr#bsimm" = "1"                                                             	   // Backstab immunity
"rr#infra" = "1"                                                             	   // Infravision
"newmove"  = "5"                                                                   // new movement rate
"newxpv"   = "9000"                                                                // new XP value
"newhp"    = "88"                                                                  // new hit point value
"newac"    = "0"                                                                   // new Armor Class value
"newth"    = "9"                                                                   // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "7"                                                                   // new Save vs. Death
"newsvw"   = "9"                                                                   // new Save vs. Wand
"newsvp"   = "8"                                                                   // new Save vs. Polymorph
"newsvb"   = "8"                                                                   // new Save vs. Breath
"newsvs"   = "10"                                                                  // new Save vs. Spell
"newlvl1"  = "11"                                                                  // new level (first class)
"newfr"	   = "100"                                                                 // new Resist Fire value
"newcr"	   = "50"                                                                  // new Resist Cold value
"newer"	   = "127"                                                                 // new Resist Electricity value
"newrs"	   = "50"                                                                  // new Resist Slashing
"newrc"	   = "100"                                                                 // new Resist Crushing
"newrp"	   = "50"                                                                  // new Resist Piercing
"newstr"   = "19"                                                                  // new Strength value
"newint"   = "7"                                                                   // new Intelligence value
"newwis"   = "7"                                                                   // new Wisdom value
"newdex"   = "10"                                                                  // new Dexterity value
"newcon"   = "19"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newmor"   = "18"                                                                  // new morale value
"newgen"   = "5"                                                                   // new general value
"newrace"  = "145"                                                                 // new race (ELEMENTAL)
"newclass" = "188"                                                                 // new class (ELEMENTAL_EARTH)
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforced creature 1 (uses strict PnP values)
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "RR#SHAMB"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MC4MO"                                                          // Stratagems melee script
"script08"   = "DW2MC2GE"                                                          // Stratagems melee script
"script09"   = "DW2MC3GE"                                                          // Stratagems melee script
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION DELETE_CRE_EFFECT INT_VAR opcode_to_delete = "101" END       // remove spurious opcode protections
LAUNCH_PATCH_FUNCTION DELETE_CRE_EFFECT INT_VAR opcode_to_delete = "98" END        // mark opcode #98 (Regeneration) for deletion
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Shambler, Greater
ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~RR#SHM02~                                                             // Greater Shambler - RR_mod
            ~WQXMOU~                                                               // Greater Shambler - White Queen

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REMOVE_CRE_ITEM ~IMMUNE2~  							                           	   // remove IMMUNE2 (+1 Weapon immunity)
REMOVE_CRE_ITEM ~RING95~  							                           	   // remove Ring95 (undead immunity)
REPLACE_CRE_ITEM ~RR#SHAMB~ #0 #0 #0 ~UNDROPPABLE~ ~HELMET~                        // add Shambler immunity
REPLACE_CRE_ITEM ~RR#SHAM6~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~RR#reg2~ #0 #0 #0 ~UNDROPPABLE~ ~BELT~                          // replace generic regeneration item with aTweaks' version
REMOVE_KNOWN_SPELLS                                                               // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                           // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#ecncl~ #0 ~innate~ ( 1 )                                  // adds 1x Elemental Concealment
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                  // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                           // Initialize variables
"rr#bump"  = "1"                                                                  // NPC bump (allows the creature to movee others out of its way)
"rr#bsimm" = "1"                                                             	   // Backstab immunity
"rr#infra" = "1"                                                             	   // Infravision
"newmove"  = "5"                                                                   // new movement rate
"newxpv"   = "14000"                                                               // new XP value
"newhp"    = "128"                                                                 // new hit point value
"newac"    = "-1"                                                                  // new Armor Class value
"newth"    = "5"                                                                   // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "4"                                                                   // new Save vs. Death
"newsvw"   = "6"                                                                   // new Save vs. Wand
"newsvp"   = "5"                                                                   // new Save vs. Polymorph
"newsvb"   = "4"                                                                   // new Save vs. Breath
"newsvs"   = "7"                                                                   // new Save vs. Spell
"newlvl1"  = "16"                                                                  // new level (first class)
"newfr"	   = "100"                                                                 // new Resist Fire value
"newcr"	   = "50"                                                                  // new Resist Cold value
"newer"	   = "127"                                                                 // new Resist Electricity value
"newrs"	   = "50"                                                                  // new Resist Slashing
"newrc"	   = "100"                                                                 // new Resist Crushing
"newrp"	   = "50"                                                                  // new Resist Piercing
"newstr"   = "20"                                                                  // new Strength value
"newint"   = "7"                                                                   // new Intelligence value
"newwis"   = "7"                                                                   // new Wisdom value
"newdex"   = "10"                                                                  // new Dexterity value
"newcon"   = "20"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newmor"   = "18"                                                                  // new morale value
"newgen"   = "5"                                                                   // new general value
"newrace"  = "145"                                                                 // new race (ELEMENTAL)
"newclass" = "188"                                                                 // new class (ELEMENTAL_EARTH)
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforced creature 1 (uses strict PnP values)
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "RR#SHAMB"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MC4MO"                                                          // Stratagems melee script
"script08"   = "DW2MC2GE"                                                          // Stratagems melee script
"script09"   = "DW2MC3GE"                                                          // Stratagems melee script
"script10"   = "RR#SHM"                                                            // RR script
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION DELETE_CRE_EFFECT INT_VAR opcode_to_delete = "101" END       // remove spurious opcode protections
LAUNCH_PATCH_FUNCTION DELETE_CRE_EFFECT INT_VAR opcode_to_delete = "98" END        // mark opcode #98 (Regeneration) for deletion
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block


// Shambler, Elder

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~HGMND2~                                                               // Greater Shambler
            ~HGMOUND~                                                              // Greater Shambler
            ~RR#SHM03~                                                             // Greater Shambler - RR_mod

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REMOVE_CRE_ITEM ~IMMUNE2~  							                           	   // remove IMMUNE2 (+1 Weapon immunity)
REMOVE_CRE_ITEM ~RING95~  							                           	   // remove Ring95 (undead immunity)
REPLACE_CRE_ITEM ~RR#SHAMB~ #0 #0 #0 ~UNDROPPABLE~ ~HELMET~                        // add Shambler immunity
REPLACE_CRE_ITEM ~RR#SHAM8~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~RR#reg3~ #0 #0 #0 ~UNDROPPABLE~ ~BELT~                           // replace generic regeneration item with aTweaks' version
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#ecncl~ #0 ~innate~ ( 1 )                                   // adds 1x Elemental Concealment
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bump"  = "1"                                                                   // NPC bump (allows the creature to movee others out of its way)
"rr#bsimm"  = "1"                                                             	   // Backstab immunity
"rr#infra"  = "1"                                                             	   // Infravision
"newmove"  = "5"                                                                   // new movement rate
"newxpv"   = "18000"                                                               // new XP value
"newhp"    = "160"                                                                 // new hit point value
"newac"    = "-2"                                                                  // new Armor Class value
"newth"    = "1"                                                                   // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "3"                                                                   // new Save vs. Death
"newsvw"   = "5"                                                                   // new Save vs. Wand
"newsvp"   = "4"                                                                   // new Save vs. Polymorph
"newsvb"   = "4"                                                                   // new Save vs. Breath
"newsvs"   = "6"                                                                   // new Save vs. Spell
"newlvl1"  = "20"                                                                  // new level (first class)
"newfr"	   = "100"                                                                 // new Resist Fire value
"newcr"	   = "50"                                                                  // new Resist Cold value
"newer"	   = "127"                                                                 // new Resist Electricity value
"newrs"	   = "75"                                                                  // new Resist Slashing
"newrc"	   = "100"                                                                 // new Resist Crushing
"newrp"	   = "75"                                                                  // new Resist Piercing
"newstr"   = "20"                                                                  // new Strength value
"newint"   = "7"                                                                   // new Intelligence value
"newwis"   = "7"                                                                   // new Wisdom value
"newdex"   = "10"                                                                  // new Dexterity value
"newcon"   = "20"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newmor"   = "19"                                                                  // new morale value
"newgen"   = "5"                                                                   // new general value
"newrace"  = "145"                                                                 // new race (ELEMENTAL)
"newclass" = "188"                                                                 // new class (ELEMENTAL_EARTH)
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "RR#SHAMB"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "GRPSHT01"                                                          // generic shout script
"script08"   = "DW2MC3GE"                                                          // Stratagems melee script
"script09"   = "RR#SHM"                                                            // RR script
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION DELETE_CRE_EFFECT INT_VAR opcode_to_delete = "101" END       // remove spurious opcode protections
LAUNCH_PATCH_FUNCTION DELETE_CRE_EFFECT INT_VAR opcode_to_delete = "98" END        // mark opcode #98 (Regeneration) for deletion
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

//////////////////////////
// Creature modifications: Beasts
//////////////////////////

/////////////////Dogs and wolves

// Dog, Wild

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~dogwi~                                                                // Wild Dog - BG1
            ~dogwil01~                                                             // Wild Dog - BG2
            ~dogwilsu~                                                             // Wild Dog - animal summoning spell (druid)
            // ~FAMDOG~                                                            // Wild Dog - BG2
            ~ndog~                                                                 // Wild Dog - BG2
            ~uddog~                                                                // Wild Dog - BG2
            ~A#FERA01~                                                             // Wild Dog - Feral Ranger KIT summon (UB or Dvine Remix)
            ~dw#rndwi~                                                             // Wild Dog - mod SCS realistic wolves
            ~pkdog~                                                                // Wild Dog - TDD

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~RR#WIDOG~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"newmove"  = "11"                                                                  // new movement rate
"newxpv"   = "35"                                                                  // new XP value
"newhp"    = "9"                                                                   // new hit point value
"newac"    = "7"                                                                   // new Armor Class value
"newth"    = "19"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "14"                                                                  // new Save vs. Death
"newsvw"   = "16"                                                                  // new Save vs. Wand
"newsvp"   = "15"                                                                  // new Save vs. Polymorph
"newsvb"   = "17"                                                                  // new Save vs. Breath
"newsvs"   = "17"                                                                  // new Save vs. Spell
"newlvl1"  = "1"                                                                   // new level (first class)
"newstr"   = "12"                                                                  // new Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "16"                                                                  // new Dexterity value
"newcon"   = "13"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "105"                                                                 // new race (DOG)
"newclass" = "109"                                                                 // new class (DOG_WILD)
"newmor"   = "7"                                                                   // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // Not enforced values
"notenf01"  = "A#FERA01"                                                           // enforce values
"notenf02"  = "DOGWISU"                                                            // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#wdog"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DIREWOLF"                                                          // Big Picture shout script
"script08"   = "WILDDOG"                                                           // Big Picture shout script
"script09"   = "DW2MP0MO"                                                          // Stratagems melee script
"script10"   = "dw#wldog"                                                          // Stratagems realistic wolf script
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Dog, War

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~dogwa~                                                                // War Dog - BG1
            ~dogwar01~                                                             // War Dog - BG2
            ~dogwasu~                                                              // War Dog - animal summoning spell (druid)
            // ~FAMWAR~                                                            // War Dog - BG2
            ~FSDOG~                                                                // War Dog - BG2
            ~GPDOG1~                                                               // War Dog - BG2
            ~BHWARDOG~                                                             // War Dog - NTotSC
            ~NTDOGFU1~                                                             // War Dog - NTotSC
            ~NTDOGFU2~                                                             // War Dog - NTotSC
            ~NTDOGFUN~                                                             // War Dog - NTotSC
            ~NTPOOCH~                                                              // War Dog - NTotSC
            ~dw#rndwa~                                                             // War Dog - Stratagems realistic wolves

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~RR#WADOG~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"newmove"  = "9"                                                                   // new movement rate
"newxpv"   = "65"                                                                  // new XP value
"newhp"    = "18"                                                                  // new hit point value
"newac"    = "6"                                                                   // new Armor Class value
"newth"    = "19"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "14"                                                                  // new Save vs. Death
"newsvw"   = "16"                                                                  // new Save vs. Wand
"newsvp"   = "15"                                                                  // new Save vs. Polymorph
"newsvb"   = "17"                                                                  // new Save vs. Breath
"newsvs"   = "17"                                                                  // new Save vs. Spell
"newlvl1"  = "2"                                                                   // new level (first class)
"newstr"   = "13"                                                                  // new Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "15"                                                                  // new Dexterity value
"newcon"   = "15"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "105"                                                                 // new race (DOG)
"newclass" = "110"                                                                 // new class (DOG_WAR)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
"notenf01"  = "A#FERA01"                                                           // not enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#wdog"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "WARDOG"                                                            // Big Picture shout script
"script08"   = "DW2MP0MO"                                                          // Stratagems melee script
"script09"   = "GPSHOUT"                                                           // Stratagems melee script
"script10"   = "dw#wldog"                                                          // Stratagems realistic wolf script
"script11"   = "GPDOG1"                                                            // Stratagems realistic wolf script
"skipfile01" = "BHWARDOG"                                                            // Stratagems realistic wolf script
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Wolf

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~NWOLF~                                                                // Wolf
            // ~PLYWOLF~                                                           // Wolf - Polymorph
            // ~TRANIM02~                                                          // Wolf - BG2
            ~WOLF01~                                                               // Wolf - BG2
            ~wolfsu~                                                               // Wolf - druid summoning spell
            ~A#FERA02~                                                             // Wolf - Feral Ranger KIT summon (UB or Dvine Remix)
            ~A#FERA03~                                                             // Wolf - Feral Ranger KIT summon (UB or Dvine Remix)
            ~BGWOLF~                                                               // Wolf - BGT
            //~CLFWLF~                                                             // Wolf - emad
            ~WOLFCH~                                                               // Wolf - BG1
            //~WOLFCHAR~                                                           // Wolf - druid polymorph
            ~dw#rnwlf~ 															   // Wolf - mod SCS realistic wolves
            ~CB595BLB~                                                             // Wolf - Check the Body
            ~MYANI4~                                                               // Wolf - RoT

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~RR#WOLF~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                  // replace default weapon with a more PnP accurate weapon
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"newmove"  = "13"                                                                  // new movement rate
"newxpv"   = "65"                                                                  // new XP value
"newhp"    = "24"                                                                  // new hit point value
"newac"    = "7"                                                                   // new Armor Class value
"newth"    = "18"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "13"                                                                  // new Save vs. Death
"newsvw"   = "15"                                                                  // new Save vs. Wand
"newsvp"   = "14"                                                                  // new Save vs. Polymorph
"newsvb"   = "16"                                                                  // new Save vs. Breath
"newsvs"   = "16"                                                                  // new Save vs. Spell
"newlvl1"  = "3"                                                                   // new level (first class)
"newstr"   = "14"                                                                  // new Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "17"                                                                  // new Dexterity value
"newcon"   = "15"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "117"                                                                 // new race (WOLF)
"newclass" = "143"                                                                 // new class (WOLF)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
"notenf01"  = "A#FERA02"                                                           // not enforced values
"notenf02"  = "A#FERA03"                                                           // not enforced values
"notenf03"  = "CB595BLB"                                                           // not enforced values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#wolf"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MP0MO"                                                          // Stratagems melee script
"script08"   = "DW#GPSHM"                                                          // Stratagems shout script
"script09"   = "WOLF"                                                          	   // Specific BG scripts
"script10"   = "_WOLF"                                                             // Specific BG scripts
"script11"   = "dw#wldog"                                                          // Stratagems realistic wolf script
"script12"   = "HUNTER"                                                            // Hunter Script
"skipfile01" = "wolvesu"                                                           // WOLF summoned (Druid)
"skipfile02" = "PLYWOLF"                                                           // WOLF polymorphe IWDification (Mage)
"skipfile03" = "CLFWLF"                                                            // WOLF mod
"skipfile04" = "WOLFCH"                                                            // WOLF mod
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Wolf, Dire

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~WOLFDI~                                                               // Dire Wolf - BG2
            ~WOLFDI01~                                                             // Dire Wolf - BG2
            ~WOLFDISU~                                                             // Dire Wolf - druid summing spell
            ~A#FERA03~                                                             // Dire Wolf - Feral Ranger KIT summon (UB or Dvine Remix)
            ~DW#VMWO1~                                                             // Dire Wolf - Stratagems
            ~DW#VMWO2~                                                             // Dire Wolf - Stratagems
            ~P#WOLF02~                                                             // Dire Wolf - BG1 NPC
            ~CB595AN3~                                                             // Wolf - Check the Body

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~RR#wolfd~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"newmove"  = "13"                                                                  // new movement rate
"newxpv"   = "175"                                                                 // new XP value
"newhp"    = "36"                                                                  // new hit point value
"newac"    = "6"                                                                   // new Armor Class value
"newth"    = "15"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "11"                                                                  // new Save vs. Death
"newsvw"   = "13"                                                                  // new Save vs. Wand
"newsvp"   = "12"                                                                  // new Save vs. Polymorph
"newsvb"   = "13"                                                                  // new Save vs. Breath
"newsvs"   = "14"                                                                  // new Save vs. Spell
"newlvl1"  = "4"                                                                   // new level (first class)
"newstr"   = "16"                                                                  // new Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "17"                                                                  // new Dexterity value
"newcon"   = "16"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "117"                                                                 // new race (WOLF)
"newclass" = "145"                                                                 // new class (WOLF_DIRE)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"  = "1"                                                            	   // enforce values
"notenf01" = "A#FERA03"                                                            // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#wlfdi"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DIREWOLF"                                                          // Dire Wolf specific script
"script08"   = "DW2MP0MO"                                                          // Stratagems melee script
"script09"   = "DW#GPSHM"                                                          // Stratagems shout script
"script10"   = "WOLF"                                                              // Wolf specific script - Vanilla
"script11"   = "_WOLF"                                                             // Wolf specific script - Vanilla
"script12"   = "HUNTER"                                                            // Hunter Script
"skipfile01" = "DW#VMWO1"                                                          // Dire WOLF - Stratagems
"skipfile02" = "DW#VMWO2"                                                          // Dire WOLF - Stratagems
"skipfile03" = "P#WOLF02"                                                          // Dire WOLF - mod?
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

/////////////////Bears

// Bear, Black

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~BEARBL~                                                               // Black Bear - BG2
            ~BEARBL01~                                                             // Black Bear - BG2
            ~BEARBLSU~                                                             // Black Bear - Druid Summoning Spell
            ~NBEARBL~                                                              // Black Bear - BG2
            ~GLBEAR2~                                                              // Black Bear - BG2
            ~PLYBEAR2~                                                             // Black Bear - mod IWDification polymorph
            ~SBEARBL~                                                              // Black Bear - Bonehill
            ~UBDBEAR~                                                              // Black Bear - mod ?
            ~VBEARBL~                                                              // Black Bear - mod ?
            ~CLIFBR1~                                                              // Grizzly Bear - emad
            ~CLIFBR2~                                                              // Grizzly Bear - emad

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#bbear~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~rr#bbea2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 				       // 2nd attack
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#ptwf"  = "1"                                                                   // perfect two weapon fighting (for creatures with multiple weapons)
"newmove"  = "9"                                                                   // new movement rate
"newxpv"   = "175"                                                                 // new XP value
"newhp"    = "27"                                                                  // new hit point value
"newac"    = "7"                                                                   // new Armor Class value
"newth"    = "17"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "13"                                                                  // new Save vs. Death
"newsvw"   = "15"                                                                  // new Save vs. Wand
"newsvp"   = "14"                                                                  // new Save vs. Polymorph
"newsvb"   = "16"                                                                  // new Save vs. Breath
"newsvs"   = "16"                                                                  // new Save vs. Spell
"newlvl1"  = "3"                                                                   // new level (first class)
"newstr"   = "18"                                                                  // new Strength value
"newstrx"  = "51"                                                                  // new Exceptional Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "16"                                                                  // new Dexterity value
"newcon"   = "16"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "103"                                                                 // new race (BEAR)
"newclass" = "104"                                                                 // new class (BEAR_BLACK)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#bear"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MC0MW"                                                          // Stratagems melee script
"script08"   = "SUMSHT02"                                                          // shout script
"script09"   = "WDASIGHT"                                                          // Vanilla melee script
"script10"   = "BEAR"                                                              // Vanilla script: friendly druid
"script11"   = "CBEAR"                                                             // Vanilla script: friendly druid
"script12"   = "_BEAR"                                                             // Vanilla script: friendly druid
"script13"   = "_CBEAR"                                                            // Vanilla script: friendly druid
"script14"   = "HUNTER"                                                            // Hunter Script
"skipfile01" = "PLYBEAR2"                                                          // Polymorphe IWDification (Mage)
"skipfile02" = "CLIFBR1"                                                           // Polymorphe IWDification (Mage)
"skipfile03" = "CLIFBR2"                                                           // Polymorphe IWDification (Mage)
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Bear, Brown

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~BEARBR~                                                               // Brown Bear - BG2
            ~BEARBR01~                                                             // Brown Bear - BG2
            ~BEARBRSU~                                                             // Brown Bear - Druid Summoning Spell
            ~NBEARBR~                                                              // Brown Bear - BG2
            ~VBEARBR~                                                              // Brown Bear - BG2
            ~PLYBEAR1~                                                             // Brown Bear - mod IWDification polymorph
            ~ESXBEA~                                                               // Brown Bear - Elistraee
            ~F_BEARSU~                                                             // Giant Bear - Drizzt Saga
			
BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#brbea~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~rr#brbe2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 				       // 2nd attack
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#ptwf"  = "1"                                                                   // perfect two weapon fighting (for creatures with multiple weapons)
"newmove"  = "9"                                                                   // new movement rate
"newxpv"   = "420"                                                                 // new XP value
"newhp"    = "45"                                                                  // new hit point value
"newac"    = "6"                                                                   // new Armor Class value
"newth"    = "15"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "11"                                                                  // new Save vs. Death
"newsvw"   = "13"                                                                  // new Save vs. Wand
"newsvp"   = "12"                                                                  // new Save vs. Polymorph
"newsvb"   = "13"                                                                  // new Save vs. Breath
"newsvs"   = "14"                                                                  // new Save vs. Spell
"newlvl1"  = "5"                                                                   // new level (first class)
"newstr"   = "18"                                                                  // new Strength value
"newstrx"  = "76"                                                                  // new Exceptional Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "14"                                                                  // new Dexterity value
"newcon"   = "17"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "103"                                                                 // new race (BEAR)
"newclass" = "105"                                                                 // new class (BEAR_BROWN)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#bear"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MC0MW"                                                          // Stratagems melee script
"script08"   = "SUMSHT02"                                                          // shout script
"script10"   = "BEAR"                                                              // Vanilla script: friendly druid
"script11"   = "CBEAR"                                                             // Vanilla script: friendly druid
"script12"   = "_BEAR"                                                             // Vanilla script: friendly druid
"script13"   = "_CBEAR"                                                            // Vanilla script: friendly druid
"script14"   = "HUNTER"                                                            // Hunter Script
"skipfile01" = "PLYBEAR1"                                                          // Polymorph IWDififcaton (Mage Spell)
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Bear, Cave

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~BEARCA~                                                               // Cave Bear - BG1
            ~BEARCA01~                                                             // Cave Bear - BG2
            ~BEARCASU~                                                             // Cave Bear - Druid Summoning Spell
            ~VBEARCA~                                                              // Cave Bear - BG2
            ~CAVENE~                                                               // Cave Bear - BG1
            // ~TRANIM01~                                                          // Cave Bear - BG2
            ~URSA~                                                                 // Cave Bear - BG1

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#cabea~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~rr#cabe2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 				       // 2nd attack
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#ptwf"  = "1"                                                                   // perfect two weapon fighting (for creatures with multiple weapons)
"newmove"  = "9"                                                                   // new movement rate
"newxpv"   = "650"                                                                 // new XP value
"newhp"    = "54"                                                                  // new hit point value
"newac"    = "6"                                                                   // new Armor Class value
"newth"    = "13"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "10"                                                                  // new Save vs. Death
"newsvw"   = "12"                                                                  // new Save vs. Wand
"newsvp"   = "11"                                                                  // new Save vs. Polymorph
"newsvb"   = "12"                                                                  // new Save vs. Breath
"newsvs"   = "13"                                                                  // new Save vs. Spell
"newlvl1"  = "6"                                                                   // new level (first class)
"newstr"   = "18"                                                                  // new Strength value
"newstrx"  = "91"                                                                  // new Exceptional Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "14"                                                                  // new Dexterity value
"newcon"   = "17"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "103"                                                                 // new race (BEAR)
"newclass" = "106"                                                                 // new class (BEAR_CAVE)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
"notenf01"  = "URSA"                                                               // not enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#bear"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MC0MW"                                                          // Stratagems melee script
"script08"   = "SUMSHT02"                                                          // Stratagems shout script
"script09"   = "DW#GPSHT"                                                          // Stratagems shout script
"script10"   = "BEAR"                                                              // Vanilla script: friendly druid
"script11"   = "CBEAR"                                                             // Vanilla script: friendly druid
"script12"   = "_BEAR"                                                             // Vanilla script: friendly druid
"script13"   = "_CBEAR"                                                            // Vanilla script: friendly druid
"script14"   = "HUNTER"                                                            // Hunter Script
"skipfile01" = "BEARCASU"                                                          // Cave Bear summoned (Druid)
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Bear, Polar and grizzly

COPY_EXISTING "BEARPO01.cre" "override/rr#gbear.cre"
	SAY NAME1 @1929
	SAY NAME2 @1929

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~BEARGR~                                                               // Grizzly Bear - BG2
            ~BEARGRSU~                                                             // Grizzly Bear - BG2
            ~BEARPO~                                                               // Mountain Bear - BG1
            ~BEARPO01~                                                             // Mountain Bear - BG2
            ~BEARPO1~                                                              // Mountain Bear - BG1
            ~BEARPO3~                                                              // Polar Bear
            ~BEARPOSU~                                                             // Polar Bear  - Druid Summoning Spell
            ~CDIA481~                                                              // Polar Bear - mod IWDification: polymorph
            ~NTBEARPO~                                                             // Mountain Bear - NTotSC
            ~OBSICE04~                                                             // Mountain Bear - BG2
            ~SBEARGR~                                                              // Grizzly Bear - Bonehill
            ~TREVIL04~                                                             // Grizzly Bear - BG2

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#pobea~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~rr#pobe2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 				       // 2nd attack
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "126" END     // mark opcode #126 (Movement Modifier) for deletion
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "176" END     // mark opcode #176 (Movement Modifier II) for deletion
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#ptwf"  = "1"                                                                   // perfect two weapon fighting (for creatures with multiple weapons)
"newmove"  = "9"                                                                   // new movement rate
"newxpv"   = "1400"                                                                // new XP value
"newhp"    = "72"                                                                  // new hit point value
"newac"    = "6"                                                                   // new Armor Class value
"newth"    = "11"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "8"                                                                   // new Save vs. Death
"newsvw"   = "10"                                                                  // new Save vs. Wand
"newsvp"   = "9"                                                                   // new Save vs. Polymorph
"newsvb"   = "9"                                                                   // new Save vs. Breath
"newsvs"   = "11"                                                                  // new Save vs. Spell
"newlvl1"  = "8"                                                                   // new level (first class)
"newstr"   = "18"                                                                  // new Strength value
"newstrx"  = "100"                                                                 // new Exceptional Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "16"                                                                  // new Dexterity value
"newcon"   = "18"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "103"                                                                 // new race (BEAR)
"newclass" = "107"                                                                 // new class (BEAR_POLAR)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#bear"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MC3MW"                                                          // Stratagems melee script
"script08"   = "DW2MC0MW"                                                          // Stratagems melee script
"script09"   = "SUMSHT02"                                                          // Stratagems shout script
"script10"   = "BEAR"                                                              // Vanilla script: friendly druid
"script11"   = "CBEAR"                                                             // Vanilla script: friendly druid
"script12"   = "_BEAR"                                                             // Vanilla script: friendly druid
"script13"   = "_CBEAR"                                                            // Vanilla script: friendly druid
"script14"   = "HUNTER"                                                            // Hunter Script
"skipfile01" = "CDIA481"                                                           // Polar bear polymrphe - IWDification
"skipfile02" = "beargrsu"                                                          // Grizzly summoned - mod ?
"skipfile03" = "bearposu"                                                          // Grizzly summoned - mod ?
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Bear, Giant

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~kaldran~                                                              // Giant Bear
            ~rr#gbear~                                                             // Giant Bear - atweaks animal summoning 3
            // ~F_SPIBEA~                                                             // Giant Bear - Drizzt Saga
BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
PATCH_IF IDS_OF_SYMBOL("Animate" "BEAR_GIANT_D2") > 0 BEGIN
  WRITE_LONG 0x28 IDS_OF_SYMBOL("Animate" "BEAR_GIANT_D2")
END
PATCH_IF ("%file%" STRING_EQUAL_CASE ~kaldran~) BEGIN
  REPLACE_CRE_ITEM ~rr#gibea~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON2~
END ELSE PATCH_IF ("%file%" STRING_EQUAL_CASE ~F_SPIBEA~) BEGIN
  REPLACE_CRE_ITEM ~rr#gibe2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 				       // 2nd attack    
END ELSE BEGIN
  REPLACE_CRE_ITEM ~rr#gibea~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP               // replace default weapon with a more PnP accurate weapon
  REPLACE_CRE_ITEM ~rr#gibe2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 				       // 2nd attack
END
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#ptwf"  = "1"                                                                   // perfect two weapon fighting (for creatures with multiple weapons)
"newmove"  = "9"                                                                   // new movement rate
"newxpv"   = "8000"                                                                // new XP value
"newhp"    = "128"                                                                 // new hit point value
"newac"    = "5"                                                                   // new Armor Class value
"newth"    = "5"                                                                   // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "4"                                                                   // new Save vs. Death
"newsvw"   = "6"                                                                   // new Save vs. Wand
"newsvp"   = "5"                                                                   // new Save vs. Polymorph
"newsvb"   = "4"                                                                   // new Save vs. Breath
"newsvs"   = "7"                                                                   // new Save vs. Spell
"newlvl1"  = "16"                                                                  // new level (first class)
"newstr"   = "19"                                                                  // new Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "16"                                                                  // new Dexterity value
"newcon"   = "19"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "103"                                                                 // new race (BEAR)
"newclass" = "255"                                                                 // new class (NO_CLASS)
"newmor"   = "12"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
"notenf01"	= "kaldran"
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#bear"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script10"   = "BEAR"                                                              // third AI script name
"script11"   = "CBEAR"                                                             // third AI script name
"script12"   = "_BEAR"                                                             // third AI script name
"script13"   = "_CBEAR"                                                            // third AI script name
"script14"   = "HUNTER"                                                            // Hunter Script
"skipfile01" = "kaldran"
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

/////////////////Great Cat

// Cheetah

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~CATCHE01~                                                             // Cheetah - BG2

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#cheet~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~rr#sprnt~ #0 #0 #0 ~UNDROPPABLE~ ~BOOTS~                 	       // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~rr#chee2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 				       // 2nd attack
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#stlth~ #0 ~innate~ ( 1 )                                   // adds 1x Hide in shadow
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bsimm" = "1"                                                             	   // Backstab immunity
"rr#ptwf"  = "1"                                                                   // perfect two weapon fighting (for creatures with multiple weapons)
"newmove"  = "11"                                                                  // new movement rate
"newxpv"   = "175"                                                                 // new XP value
"newhp"    = "24"                                                                  // new hit point value
"newac"    = "5"                                                                   // new Armor Class value
"newth"    = "17"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "13"                                                                  // new Save vs. Death
"newsvw"   = "15"                                                                  // new Save vs. Wand
"newsvp"   = "14"                                                                  // new Save vs. Polymorph
"newsvb"   = "16"                                                                  // new Save vs. Breath
"newsvs"   = "16"                                                                  // new Save vs. Spell
"newlvl1"  = "3"                                                                   // new level (first class)
"newstr"   = "16"                                                                  // new Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "19"                                                                  // new Dexterity value
"newcon"   = "15"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "137"                                                                 // new race (CAT)
"newclass" = "200"                                                                 // new class (HUNTER_CREATURE)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#gcat"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MP0MO"                                                          // Stratagems melee script
"script08"   = "HUNTER"                                                            // Hunter Script
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Leopard

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~CATLEO01~                                                                	   // Leopard
            // ~WAUKLEO~                                                                	   // Leopard

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#leop~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                  // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~rr#leop2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 				       // 2nd attack
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#stlth~ #0 ~innate~ ( 1 )                                   // adds 1x Hide in shadow
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bsimm"  = "1"                                                             	   // Backstab immunity
"rr#ptwf"  = "1"                                                                   // perfect two weapon fighting (for creatures with multiple weapons)
"newmove"  = "11"                                                                  // new movement rate
"newxpv"   = "270"                                                                 // new XP value
"newhp"    = "26"                                                                  // new hit point value
"newac"    = "6"                                                                   // new Armor Class value
"newth"    = "17"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "13"                                                                  // new Save vs. Death
"newsvw"   = "15"                                                                  // new Save vs. Wand
"newsvp"   = "14"                                                                  // new Save vs. Polymorph
"newsvb"   = "16"                                                                  // new Save vs. Breath
"newsvs"   = "16"                                                                  // new Save vs. Spell
"newlvl1"  = "3"                                                                   // new level (first class)
"newstr"   = "16"                                                                  // new Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "18"                                                                  // new Dexterity value
"newcon"   = "16"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "137"                                                                 // new race (CAT)
"newclass" = "200"                                                                 // new class (HUNTER_CREATURE)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#gcat"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MP0MO"                                                          // Stratagems melee script
"script08"   = "HUNTER"                                                            // Hunter Script
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Panther

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~CATJAG01~                                                             // Panther - BG2
            ~CATJAGSU~                                                             // Panther - BG2
            ~CATJAGWP~                                                             // Panther - BG2 (unused ?)
            ~CATPAN01~                                                             // Panther - BG2
            // ~TRANIM03~                                                          // Panther - BG2
            ~TREVIL05~                                                             // Panther - BG2
            ~F_GUEN~                                                               // Guenhwyvar (Drizzt Saga)		

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
PATCH_IF ("%SOURCE_RES%" STRING_EQUAL_CASE ~F_GUEN~) BEGIN                         // special case, Guenhwyvar in the Ranger Stronghold quest
  REPLACE_CRE_ITEM ~rr#panth~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP               // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~rr#pant2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 				       // 2nd attack
END ELSE REPLACE_CRE_ITEM ~RR#GUEN2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 		       // 2nd attack
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#stlth~ #0 ~innate~ ( 1 )                                   // adds 1x Hide in shadow
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bsimm"  = "1"                                                             	   // Backstab immunity
"rr#ptwf"  = "1"                                                                   // perfect two weapon fighting (for creatures with multiple weapons)
"newmove"  = "11"                                                                  // new movement rate
"newxpv"   = "270"                                                                 // new XP value
"newhp"    = "33"                                                                  // new hit point value
"newac"    = "6"                                                                   // new Armor Class value
"newth"    = "17"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "13"                                                                  // new Save vs. Death
"newsvw"   = "15"                                                                  // new Save vs. Wand
"newsvp"   = "14"                                                                  // new Save vs. Polymorph
"newsvb"   = "16"                                                                  // new Save vs. Breath
"newsvs"   = "16"                                                                  // new Save vs. Spell
"newlvl1"  = "4"                                                                   // new level (first class)
"newstr"   = "17"                                                                  // new Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "18"                                                                  // new Dexterity value
"newcon"   = "16"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "137"                                                                 // new race (CAT)
"newclass" = "200"                                                                 // new class (HUNTER_CREATURE)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
"notenf01"  = "F_GUEN"                                                       	   // Not enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#gcat"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MP1MO"                                                          // Stratagems melee script
"script08"   = "SUMSHT01"                                                          // Stratagems melee script
"script09"   = "HUNTER"                                                            // Hunter Script
"skipfile01" = "catjagsu"
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Jaguar

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~JAGUARSU~                                                             // Jaguar - BG2

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#Jagu~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                  // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~rr#Jagu2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 				       // 2nd attack
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#stlth~ #0 ~innate~ ( 1 )                                   // adds 1x Hide in shadow
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bsimm"  = "1"                                                             	   // Backstab immunity
"rr#ptwf"  = "1"                                                                   // perfect two weapon fighting (for creatures with multiple weapons)
"newmove"  = "11"                                                                  // new movement rate
"newxpv"   = "420"                                                                 // new XP value
"newhp"    = "33"                                                                  // new hit point value
"newac"    = "6"                                                                   // new Armor Class value
"newth"    = "17"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "13"                                                                  // new Save vs. Death
"newsvw"   = "15"                                                                  // new Save vs. Wand
"newsvp"   = "14"                                                                  // new Save vs. Polymorph
"newsvb"   = "16"                                                                  // new Save vs. Breath
"newsvs"   = "16"                                                                  // new Save vs. Spell
"newlvl1"  = "4"                                                                   // new level (first class)
"newstr"   = "17"                                                                  // new Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "18"                                                                  // new Dexterity value
"newcon"   = "16"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "137"                                                                 // new race (CAT)
"newclass" = "175"                                                                 // new class (CAT)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#gcat"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MS0MO"                                                          // Stratagems melee script
"script08"   = "HUNTER"                                                            // Stratagems melee script
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Lion, Mountain

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~CATLIM01~                                                             // Lion, Mountain - BG2
            ~ANLION1~                                                              // Lion, Mountain - HTML

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#mlion~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~rr#mlio2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 				       // 2nd attack
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bsimm"  = "1"                                                             	   // Backstab immunity
"rr#ptwf"  = "1"                                                                   // perfect two weapon fighting (for creatures with multiple weapons)
"newmove"  = "9"                                                                   // new movement rate
"newxpv"   = "270"                                                                 // new XP value
"newhp"    = "25"                                                                  // new hit point value
"newac"    = "6"                                                                   // new Armor Class value
"newth"    = "17"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "13"                                                                  // new Save vs. Death
"newsvw"   = "15"                                                                  // new Save vs. Wand
"newsvp"   = "14"                                                                  // new Save vs. Polymorph
"newsvb"   = "16"                                                                  // new Save vs. Breath
"newsvs"   = "16"                                                                  // new Save vs. Spell
"newlvl1"  = "3"                                                                   // new level (first class)
"newstr"   = "16"                                                                  // new Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "17"                                                                  // new Dexterity value
"newcon"   = "17"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "137"                                                                 // new race (CAT)
"newclass" = "200"                                                                 // new class (HUNTER_CREATURE)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
"notenf01"  = "ANLION1"                                                       	   // Not enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#gcat"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MP0MO"                                                          // Stratagems melee script
"script08"   = "HUNTER"                                                            // Hunter Script
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Lion

COPY_EXISTING "CATLIO01.cre" "override/rr#smilo.cre"
	SAY NAME1 @1930
	SAY NAME2 @1930

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~CATLIO01~                                                             // Lion - BG2
            ~CATLIOSU~                                                             // Lion - BG2

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#lion~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                  // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~rr#lion2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 				       // 2nd attack
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bsimm"  = "1"                                                             	   // Backstab immunity
"rr#ptwf"  = "1"                                                                   // perfect two weapon fighting (for creatures with multiple weapons)
"newmove"  = "9"                                                                   // new movement rate
"newxpv"   = "650"                                                                 // new XP value
"newhp"    = "42"                                                                  // new hit point value
"newac"    = "5"                                                                   // new Armor Class value
"newth"    = "15"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "11"                                                                  // new Save vs. Death
"newsvw"   = "13"                                                                  // new Save vs. Wand
"newsvp"   = "12"                                                                  // new Save vs. Polymorph
"newsvb"   = "13"                                                                  // new Save vs. Breath
"newsvs"   = "14"                                                                  // new Save vs. Spell
"newlvl1"  = "5"                                                                   // new level (first class)
"newstr"   = "18"                                                                  // new Strength value
"newstrx"  = "100"                                                                 // new Exceptional Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "17"                                                                  // new Dexterity value
"newcon"   = "17"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "137"                                                                 // new race (CAT)
"newclass" = "200"                                                                 // new class (HUNTER_CREATURE)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#gcat"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MP1MO"                                                          // Stratagems melee script
"script08"   = "HUNTER"                                                            // Hunter Script
"skipfile01" = "CATLIOSU"                                                          // Lion summoned (Vanilla Animal summoning)
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Lion, Spotted

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~CATLIS01~                                                         	   // Lion, Spotted - BG2

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#slion~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~rr#slio2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 				       // 2nd attack
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bsimm"  = "1"                                                             	   // Backstab immunity
"rr#ptwf"  = "1"                                                                   // perfect two weapon fighting (for creatures with multiple weapons)
"newmove"  = "12"                                                                  // new movement rate
"newxpv"   = "975"                                                                 // new XP value
"newhp"    = "50"                                                                  // new hit point value
"newac"    = "5"                                                                   // new Armor Class value
"newth"    = "15"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "11"                                                                  // new Save vs. Death
"newsvw"   = "13"                                                                  // new Save vs. Wand
"newsvp"   = "12"                                                                  // new Save vs. Polymorph
"newsvb"   = "13"                                                                  // new Save vs. Breath
"newsvs"   = "14"                                                                  // new Save vs. Spell
"newlvl1"  = "6"                                                                   // new level (first class)
"newstr"   = "18"                                                                  // new Strength value
"newstrx"  = "100"                                                                 // new Exceptional Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "17"                                                                  // new Dexterity value
"newcon"   = "18"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "137"                                                                 // new race (CAT)
"newclass" = "200"                                                                 // new class (HUNTER_CREATURE)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#gcat"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MP2MO"                                                          // Stratagems melee script
"script08"   = "HUNTER"                                                            // Hunter Script
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Tiger, Wild

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~CATTIG01~                                                             // Tiger, Wild - BG2

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#witig~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~rr#witi2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 				       // 2nd attack
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#stlth~ #0 ~innate~ ( 1 )                                   // adds 1x Hide in shadow
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bsimm"  = "1"                                                             	   // Backstab immunity
"rr#ptwf"  = "1"                                                                   // perfect two weapon fighting (for creatures with multiple weapons)
"newmove"  = "9"                                                                   // new movement rate
"newxpv"   = "650"                                                                 // new XP value
"newhp"    = "45"                                                                  // new hit point value
"newac"    = "6"                                                                   // new Armor Class value
"newth"    = "15"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "11"                                                                  // new Save vs. Death
"newsvw"   = "13"                                                                  // new Save vs. Wand
"newsvp"   = "12"                                                                  // new Save vs. Polymorph
"newsvb"   = "13"                                                                  // new Save vs. Breath
"newsvs"   = "14"                                                                  // new Save vs. Spell
"newlvl1"  = "5"                                                                   // new level (first class)
"newstr"   = "18"                                                                  // new Strength value
"newstrx"  = "91"                                                                  // new Exceptional Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "17"                                                                  // new Dexterity value
"newcon"   = "17"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "137"                                                                 // new race (CAT)
"newclass" = "200"                                                                 // new class (HUNTER_CREATURE)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#gcat"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MP0MO"                                                          // Stratagems melee script
"script08"   = "HUNTER"                                                            // Hunter Script
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END 

// Tiger, Saber-tooth (Smilodon)

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~L#APEAP~                                                              // Tiger, Saber-tooth (Smilodon) - SotSC
            ~rr#smilo~                                                             // Tiger, Saber-tooth (Smilodon) - atweaks animal summoning 2

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#smilo~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~rr#smil2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 				       // 2nd attack
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#stlth~ #0 ~innate~ ( 1 )                                   // adds 1x Hide in shadow
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bsimm"  = "1"                                                             	   // Backstab immunity
"rr#ptwf"  = "1"                                                                   // perfect two weapon fighting (for creatures with multiple weapons)
"newmove"  = "9"                                                                   // new movement rate
"newxpv"   = "1400"                                                                // new XP value
"newhp"    = "58"                                                                  // new hit point value
"newac"    = "6"                                                                   // new Armor Class value
"newth"    = "11"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "10"                                                                  // new Save vs. Death
"newsvw"   = "12"                                                                  // new Save vs. Wand
"newsvp"   = "11"                                                                  // new Save vs. Polymorph
"newsvb"   = "12"                                                                  // new Save vs. Breath
"newsvs"   = "13"                                                                  // new Save vs. Spell
"newlvl1"  = "7"                                                                   // new level (first class)
"newstr"   = "18"                                                                  // new Strength value
"newstrx"  = "100"                                                                 // new Exceptional Strength value
"newint"   = "1"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "18"                                                                  // new Dexterity value
"newcon"   = "18"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "137"                                                                 // new race (CAT)
"newclass" = "200"                                                                 // new class (HUNTER_CREATURE)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#gcat"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "L#APEAP"                                                           // SCSII melee script
"script08"   = "HUNTER"                                                            // Hunter Script
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

/////////////////Snake

// Snake, Poison

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~SNAKE01~                                                              // Snake, Poison - BG2
            // ~WAUKSNA~                                                           // Snake, Poison - BG2

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#snak1~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"newmove"  = "11"                                                                  // new movement rate
"newxpv"   = "175"                                                                 // new XP value
"newhp"    = "17"                                                                  // new hit point value
"newac"    = "6"                                                                   // new Armor Class value
"newth"    = "19"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "14"                                                                  // new Save vs. Death
"newsvw"   = "16"                                                                  // new Save vs. Wand
"newsvp"   = "15"                                                                  // new Save vs. Polymorph
"newsvb"   = "17"                                                                  // new Save vs. Breath
"newsvs"   = "17"                                                                  // new Save vs. Spell
"newlvl1"  = "2"                                                                   // new level (first class)
"newstr"   = "12"                                                                  // new Strength value
"newint"   = "1"                                                                   // new Intelligence value
"newwis"   = "13"                                                                  // new Wisdom value
"newdex"   = "17"                                                                  // new Dexterity value
"newcon"   = "12"                                                                  // new Constitution value
"newchr"   = "2"                                                                   // new Charisma value
"newrace"  = "255"                                                                 // new race (NO_RACE)
"newclass" = "255"                                                                 // new class (NO_CLASS)
"newmor"   = "8"                                                                   // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#snake"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MP3MO"                                                          // Stratagems melee script
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Snake, Poison (Giant)

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~GORSNAKE~                                                             // Snake, Poison (Giant) - BG2
            ~SNAKEG01~                                                             // Snake, Poison (Giant) - BG2
            ~SSNAKE01~                                                             // Snake, Poison (Giant) - Bonehill
            ~L#MCSNA~                                                              // Snake, Poison (Giant) - SotSC
            ~ESXSNA~                                                               // Snake, Poison (Giant) - Elistraee
            ~A7Q2SNAK~                                                             // Snake, Poison (Giant) - afaaq (Djinni Companion)
            ~A7Q2WS1A~                                                             // Snake, Poison (Giant) - afaaq (Djinni Companion)
            ~A7Q2WS1B~                                                             // Snake, Poison (Giant) - afaaq (Djinni Companion)
            ~A7Q2WS1C~                                                             // Snake, Poison (Giant) - afaaq (Djinni Companion)
            ~A7Q2WS1D~                                                             // Snake, Poison (Giant) - afaaq (Djinni Companion)

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#snak2~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"newmove"  = "11"                                                                  // new movement rate
"newxpv"   = "420"                                                                 // new XP value
"newhp"    = "34"                                                                  // new hit point value
"newac"    = "5"                                                                   // new Armor Class value
"newth"    = "17"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "13"                                                                  // new Save vs. Death
"newsvw"   = "15"                                                                  // new Save vs. Wand
"newsvp"   = "14"                                                                  // new Save vs. Polymorph
"newsvb"   = "16"                                                                  // new Save vs. Breath
"newsvs"   = "16"                                                                  // new Save vs. Spell
"newlvl1"  = "4"                                                                   // new level (first class)
"newstr"   = "14"                                                                  // new Strength value
"newint"   = "1"                                                                   // new Intelligence value
"newwis"   = "13"                                                                  // new Wisdom value
"newdex"   = "17"                                                                  // new Dexterity value
"newcon"   = "14"                                                                  // new Constitution value
"newchr"   = "2"                                                                   // new Charisma value
"newrace"  = "255"                                                                 // new race (NO_RACE)
"newclass" = "255"                                                                 // new class (NO_CLASS)
"newmor"   = "9"                                                                   // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
"notenf01"  = "ESXSNA"
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#snake"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MP3MO"                                                          // Big Picture shout script
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

//////////////////////////
// Creature modifications: Magical Beasts
//////////////////////////

// Ankheg

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~ANKHEG~                                                               // Ankheg - BG1
            ~ANKHEG01~                                                             // Ankheg - BG2
            ~ANKHEGG~                                                              // Ankheg - BG1
            ~ANKHEGQ~                                                              // Ankheg - BG1
            ~ANKHGSUM~                                                             // Ankheg - heartwood
            ~L#NDC2~                                                               // Greater Ankheg - Southern Edge
            ~TUANKHEG~                                                             // Ankheg

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~ANKHEG1~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~	                       // Special case for Ankheg, animation and animation's sound work only with ANKHEG1.ITM
REPLACE_CRE_ITEM ~rr#ankhg~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON2~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#acids~ #0 ~innate~ ( 1 )                                   // adds 1x Acid Spit
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#sinv"  = "1"                                                                   // See invisible creatures
"newmove"  = "9"                                                                   // new movement rate
"newxpv"   = "975"                                                                 // new XP value
"newhp"    = "64"                                                             	   // new hit point value
"newac"    = "2"                                                                   // new Armor Class value
"newth"    = "13"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "10"                                                                  // new Save vs. Death
"newsvw"   = "12"                                                                  // new Save vs. Wand
"newsvp"   = "11"                                                                  // new Save vs. Polymorph
"newsvb"   = "12"                                                                  // new Save vs. Breath
"newsvs"   = "13"                                                                  // new Save vs. Spell
"newlvl1"  = "8"                                                                   // new level (first class)
"newstr"   = "19"                                                                  // new Strength value
"newint"   = "1"                                                                   // new Intelligence value
"newwis"   = "13"                                                                  // new Wisdom value
"newdex"   = "10"                                                                  // new Dexterity value
"newcon"   = "17"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newrace"  = "101"                                                                 // new race (ANKHEG)
"newclass" = "101"                                                                 // new class (ANKHEG)
"newmor"   = "9"                                                                   // new morale value
"newmor"   = "9"                                                                   // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
"notenf01"	= "L#NDC2"
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#ankhg"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2RC3MO"                                                          // Stratagems script
"script08"   = "ANKHEG"                                                            // Vanilla script
"script09"   = "mh#ankhg"                                                          // MiH_E&Q script
"skipfile01" = "ANKHGSUM"                                                          // Skip file
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "101" END     // remove spurious opcode protections
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Basilisk

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~BASILLSU~                                                             // Basilisk - BG2 (unused ?)
            ~BASLES01~                                                             // Basilisk - BG2
            ~BGBASILL~                                                             // Basilisk - BG1
            ~L#NSBAS2~                                                             // Basilisk - Ooze
            ~PLYBASS~                                                              // Basilisk - BG2 (unused ?)

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REMOVE_CRE_ITEM ~BASILL2~                 										   // remove weapon
REPLACE_CRE_ITEM ~rr#lbasi~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#pgaze~ #0 ~innate~ ( 1 )                                   // adds 1x Petrifying Gaze
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"newmove"  = "5"                                                                   // new movement rate
"newxpv"   = "1400"                                                                // new XP value
"newhp"    = "49"                                                                  // new hit point value
"newac"    = "4"                                                                   // new Armor Class value
"newth"    = "15"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "11"                                                                  // new Save vs. Death
"newsvw"   = "13"                                                                  // new Save vs. Wand
"newsvp"   = "12"                                                                  // new Save vs. Polymorph
"newsvb"   = "13"                                                                  // new Save vs. Breath
"newsvs"   = "14"                                                                  // new Save vs. Spell
"newlvl1"  = "6"                                                                   // new level (first class)
"newstr"   = "16"                                                                  // new Strength value
"newint"   = "1"                                                                   // new Intelligence value
"newwis"   = "13"                                                                  // new Wisdom value
"newdex"   = "10"                                                                  // new Dexterity value
"newcon"   = "15"                                                                  // new Constitution value
"newchr"   = "11"                                                                  // new Charisma value
"newrace"  = "102"                                                                 // new race (BASILISK)
"newclass" = "102"                                                                 // new class (BASILISK)
"newmor"   = "12"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#basil"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2RC3MO"                                                          // stratagems melee script
"script08"   = "LBASILSK"                                                          // Vanilla Gaze script
"skipfile01" = "BASILLSU"                                                          // Skip file
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "101" END     // remove spurious opcode protections
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Basilisk, Greater

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~ANBASIL~                                                              // Greater Basilisk - HTML
            ~BASGRT01~                                                             // Greater Basilisk - BG2
            ~BASILG~                                                               // Greater Basilisk - BG1
            ~BASILGSU~                                                             // Greater Basilisk - BG2 (unused ?)
            ~BASILMUT~                                                             // Greater Basilisk - BG1
            ~BASILNAD~                                                             // Greater Basilisk - BG1
            ~L#NSBAS1~                                                             // Greater Basilisk - Ooze
            ~L#NSSULJ~                                                             // Greater Basilisk - Ooze

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REMOVE_CRE_ITEM ~BASILG2~                 										   // remove weapon
REMOVE_CRE_ITEM ~BASILG3~                 										   // remove weapon
REPLACE_CRE_ITEM ~rr#gbas1~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~rr#gbas2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 	                   // 2nd attack
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#pgaze~ #0 ~innate~ ( 1 )                                   // adds 1x Petrifying Gaze
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bsimm" = "1"                                                             	   // Backstab immunity
"rr#ptwf"  = "1"                                                                   // perfect two weapon fighting (for creatures with multiple weapons)
"newmove"  = "5"                                                                   // new movement rate
"newxpv"   = "7000"                                                                // new XP value
"newhp"    = "80"                                                                  // new hit point value
"newac"    = "2"                                                                   // new Armor Class value
"newth"    = "11"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "8"                                                                   // new Save vs. Death
"newsvw"   = "10"                                                                  // new Save vs. Wand
"newsvp"   = "9"                                                                   // new Save vs. Polymorph
"newsvb"   = "9"                                                                   // new Save vs. Breath
"newsvs"   = "11"                                                                  // new Save vs. Spell
"newlvl1"  = "10"                                                                  // new level (first class)
"newstr"   = "18"                                                                  // new Strength value
"newint"   = "7"                                                                   // new Intelligence value
"newwis"   = "13"                                                                  // new Wisdom value
"newdex"   = "10"                                                                  // new Dexterity value
"newcon"   = "16"                                                                  // new Constitution value
"newchr"   = "11"                                                                  // new Charisma value
"newrace"  = "102"                                                                 // new race (BASILISK)
"newclass" = "103"                                                                 // new class (BASILISK_GREATER)
"newmor"   = "16"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
"notenf01"	= "L#NSSULJ"
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#basig"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2RM4MO"                                                          // stratagems melee script
"script08"   = "DW#GPSHM"                                                          // stratagems shout script
"script09"   = "GBASILSK"                                                          // Vanilla gaze script
"script10"   = "mh#grbas"                                                          // MiH_E&Q script
"skipfile01" = "BASILGSU"                                                          // Skip file
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "101" END     // remove spurious opcode protections
LAUNCH_PATCH_FUNCTION ADD_CRE_EFFECT INT_VAR opcode = 206 probability1 = 100 target = 1 timing = 9 STR_VAR resource = "rr#gbpoi" END     // add immunity to poison breath ability
LAUNCH_PATCH_FUNCTION ~ADD_CRE_EFFECT~                                             // Starts FUNCTION call (add new creature effect built-in function)
  INT_VAR
    "opcode" = "232"                                                               // effect: #232 (Cast Spell on Condition)
    "target" = "1"                                                                 // target: 1 (self)
    "timing" = "1"                                                                 // timing mode: 9 (permanent until death)
    "duration" = "0"                                                               // duration: 0
    "parameter1" = "0"                                                             // param1: (target)
    "parameter2" = "9"                                                             // param2: (condition)
    "sectype" = "0"                                                                // secondary type: none
    "probability1" = "100"                                                         // probability1: 100%
    STR_VAR
    "resource"  = "RR#gbpoi"                                                       // resref: (poison breath ability)
    END
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block


// Snake, Boalisk

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~SNAKEB01~                                                             // Snake, Boalisk - BG2
            ~l#NISNA~                                                              // Snake, Boalisk - Tangled island
            ~BOALKSUM~                                                             // Snake, Boalisk - Heartwood

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#snak3~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"newmove"  = "9"                                                                   // new movement rate
"newxpv"   = "975"                                                                 // new XP value
"newhp"    = "41"                                                                  // new hit point value
"newac"    = "5"                                                                   // new Armor Class value
"newth"    = "15"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "11"                                                                  // new Save vs. Death
"newsvw"   = "13"                                                                  // new Save vs. Wand
"newsvp"   = "12"                                                                  // new Save vs. Polymorph
"newsvb"   = "13"                                                                  // new Save vs. Breath
"newsvs"   = "14"                                                                  // new Save vs. Spell
"newlvl1"  = "5"                                                                   // new level (first class)
"newstr"   = "19"                                                                  // new Strength value
"newint"   = "1"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "17"                                                                  // new Dexterity value
"newcon"   = "16"                                                                  // new Constitution value
"newchr"   = "4"                                                                   // new Charisma value
"newrace"  = "255"                                                                 // new race (NO_RACE)
"newclass" = "255"                                                                 // new class (NO_CLASS)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
"notenf01"  = "l#NISNA"
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#snkbo"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MP3MO"                                                          // Stratagems meleee script
"script08"   = "SNAKEB01"                                                          // Gaze script
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Dog, Blink

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~DOGBLINK~                                                             // Blink dog - BG1

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#bldog~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#blink~ #0 ~innate~ ( 1 )                                   // adds 1x Teleport
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#sinv"  = "1"                                                                   // See invisible creatures
"newmove"  = "9"                                                                   // new movement rate
"newxpv"   = "270"                                                                 // new XP value
"newhp"    = "32"                                                                  // new hit point value
"newac"    = "5"                                                                   // new Armor Class value
"newth"    = "17"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "13"                                                                  // new Save vs. Death
"newsvw"   = "15"                                                                  // new Save vs. Wand
"newsvp"   = "14"                                                                  // new Save vs. Polymorph
"newsvb"   = "16"                                                                  // new Save vs. Breath
"newsvs"   = "16"                                                                  // new Save vs. Spell
"newlvl1"  = "4"                                                                   // new level (first class)
"newstr"   = "10"                                                                  // new Strength value
"newint"   = "10"                                                                  // new Intelligence value
"newwis"   = "15"                                                                  // new Wisdom value
"newdex"   = "17"                                                                  // new Dexterity value
"newcon"   = "10"                                                                  // new Constitution value
"newchr"   = "11"                                                                  // new Charisma value
"newrace"  = "105"                                                                 // new race (DOG)
"newclass" = "110"                                                                 // new class (DOG_WAR)
"newmor"   = "12"                                                                  // new morale value
"newalign" = "17"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#bldog"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MP2MO"                                                          // Stratagems melee script
"script08"   = "PSPIDER"                                                           // Vanilla phase spider script
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "101" END     // remove spurious opcode protections
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END

// Spectral Hound

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~DOGWAWP~                                                              // Spectral Hound - BG2

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#spdog~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#blur"  = "1"                                                             	   // Blur effect
"rr#bsimm" = "1"                                                             	   // Backstab immunity
"newmove"  = "11"                                                                  // new movement rate
"newxpv"   = "0"                                                                   // new XP value
"newhp"    = "40"                                                                  // new hit point value
"newac"    = "1"                                                                   // new Armor Class value
"newth"    = "15"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "11"                                                                  // new Save vs. Death
"newsvw"   = "13"                                                                  // new Save vs. Wand
"newsvp"   = "12"                                                                  // new Save vs. Polymorph
"newsvb"   = "13"                                                                  // new Save vs. Breath
"newsvs"   = "14"                                                                  // new Save vs. Spell
"newlvl1"  = "5"                                                                   // new level (first class)
"newstr"   = "17"                                                                  // new Strength value
"newint"   = "3"                                                                   // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "16"                                                                  // new Dexterity value
"newcon"   = "16"                                                                  // new Constitution value
"newchr"   = "11"                                                                  // new Charisma value
"newmor"   = "12"                                                                  // new morale value
"newalign" = "17"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LPF ~make_summon~ 
END
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#dogsu"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~extraplanar_traits~ END                                     // add extraplanar traits
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END

// Hell Hound

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~HELLHO01~                                                             // Hell Hound - BG2
            ~HELLIL01~                                                             // Hell Hound - BG2
            ~OBSFIR05~                                                             // Hell Hound - BG2

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REMOVE_CRE_ITEM ~seeinvis~                										   // remove SEEINVIS item, handle by opcode
REPLACE_CRE_ITEM ~rr#hhoun~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#fireb~ #0 ~innate~ ( 1 )                                   // adds 1x Hide in shadow
ADD_MEMORIZED_SPELL ~rr#stlth~ #0 ~innate~ ( 1 )                                   // adds 1x Hide in shadow
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#sinv"  = "1"                                                                   // See invisible creatures
"newmove"  = "9"                                                                   // new movement rate
"newxpv"   = "1400"                                                                // new XP value
"newhp"    = "56"                                                                  // new hit point value
"newac"    = "5"                                                                   // new Armor Class value
"newth"    = "13"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "10"                                                                  // new Save vs. Death
"newsvw"   = "12"                                                                  // new Save vs. Wand
"newsvp"   = "11"                                                                  // new Save vs. Polymorph
"newsvb"   = "12"                                                                  // new Save vs. Breath
"newsvs"   = "13"                                                                  // new Save vs. Spell
"newfr"	   = "100"                                                                 // new Resist Fire value
"newlvl1"  = "7"                                                                   // new level (first class)
"newstr"   = "13"                                                                  // new Strength value
"newint"   = "7"                                                                   // new Intelligence value
"newwis"   = "10"                                                                  // new Wisdom value
"newdex"   = "13"                                                                  // new Dexterity value
"newcon"   = "15"                                                                  // new Constitution value
"newchr"   = "6"                                                                   // new Charisma value
"newmor"   = "13"                                                                  // new morale value
"newalign" = "19"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#hhoun"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "HELHOU01"                                                          // Hell Hound Vanilla fire breath
"script08"   = "DW2MP2MO"                                                          // Stratagems melee script
"script09"   = "DW2MP0MO"                                                          // Stratagems melee script
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "101" END     // remove spurious opcode protections
LAUNCH_PATCH_FUNCTION fire_spell_immunities END                                    // Hell hounds are immune to fire
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END

// Dog, Moon

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~MOONDOG~                                                              // Moon Dog - BG2
            ~TELDOG~                                                              // Moon Dog - BG2
		
BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~IMMUNE2~ #0 #0 #0 ~UNDROPPABLE~ ~RRING~                 		   // add immunity to +1 weapons and below
REPLACE_CRE_ITEM ~rr#mdog~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                  // replace default weapon with a more PnP accurate weapon
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~SPIN698~ #0 ~innate~ ( 1 )                                    // adds 1x Improved invisbility
ADD_MEMORIZED_SPELL ~SPIN891~ #0 ~innate~ ( 1 )                                    // adds 1x Moon Dog Howl
ADD_MEMORIZED_SPELL ~SPIN696~ #0 ~innate~ ( 1 )                                    // adds 1x Moon Dog Sight
ADD_MEMORIZED_SPELL ~SPIN697~ #0 ~innate~ ( 3 )                                    // adds 1x Moon Mirror Image
ADD_MEMORIZED_SPELL ~SPIN699~ #0 ~innate~ ( 1 )                                    // adds 1x Moon Dog Lick
ADD_MEMORIZED_SPELL ~rr#shade~ #0 ~innate~ ( 1 )                                   // adds 1x Moon summon shades
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bsimm" = "1"                                                                   // Backstab immunity
"rr#infra" = "1"                                                                   // Infravision
"rr#sinv"  = "1"                                                                   // See invisible creatures
"newmove"  = "18"                                                                  // new movement rate
"newxpv"   = "9000"                                                                // new XP value
"newhp"    = "75"                                                                  // new hit point value
"newac"    = "0"                                                                   // new Armor Class value
"newth"    = "11"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "8"                                                                   // new Save vs. Death
"newsvw"   = "10"                                                                  // new Save vs. Wand
"newsvp"   = "9"                                                                   // new Save vs. Polymorph
"newsvb"   = "9"                                                                   // new Save vs. Breath
"newsvs"   = "11"                                                                  // new Save vs. Spell
"newlvl1"  = "9"                                                                   // new level (first class)
"newfr"    = "25"                                                                  // new Resist Fire value
"newcr"    = "25"                                                                  // new Resist Cold value
"newer"    = "25"                                                                  // new Resist Electricity value
"newar"    = "25"                                                                  // new Resist Acid value
"newmr"    = "25"                                                                  // new Resist Magic value
"newrs"    = "25"                                                                  // new Resist Slashing
"newrc"    = "25"                                                                  // new Resist Crushing
"newrp"    = "25"                                                                  // new Resist Piercing
"newrm"    = "25"                                                                  // new Resist Missiles
"newstr"   = "18"                                                                  // new Strength value
"newstrx"  = "51"                                                                  // new Exceptional Strength value
"newint"   = "16"                                                                  // new Intelligence value
"newwis"   = "17"                                                                  // new Wisdom value
"newdex"   = "17"                                                                  // new Dexterity value
"newcon"   = "15"                                                                  // new Constitution value
"newchr"   = "19"                                                                  // new Charisma value
"newmor"   = "18"                                                                  // new morale value
"newalign" = "33"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#dmoon"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GRPSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MP4MO"                                                          // Stratagems melee script
"script08"   = "MOONDOG"                                                           // Moon Dog Vanilla script
"script09"   = "TELDOG"                                                            // Moon Dog Vanilla script
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "120" END     // Handle by Immune2.itm
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "16" END      // Handle via newmove
LAUNCH_PATCH_FUNCTION ~extraplanar_traits~ END                                     // add extraplanar traits
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END

// Wolf, Zombie

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~WOLFZO01~                                                             // Zombie Wolf - BG2

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~RING95~ #0 #0 #0 ~UNDROPPABLE~ ~LRING~                 		   // PnP undead immunity
REPLACE_CRE_ITEM ~rr#zwolf~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"newmove"  = "7"                                                                   // new movement rate
"newxpv"   = "120"                                                                 // new XP value
"newhp"    = "18"                                                                  // new hit point value
"newac"    = "6"                                                                   // new Armor Class value
"newth"    = "19"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "14"                                                                  // new Save vs. Death
"newsvw"   = "16"                                                                  // new Save vs. Wand
"newsvp"   = "15"                                                                  // new Save vs. Polymorph
"newsvb"   = "17"                                                                  // new Save vs. Breath
"newsvs"   = "17"                                                                  // new Save vs. Spell
"newlvl1"  = "2"                                                                   // new level (first class)
"newcr"	   = "100"                                                                 // new Resist Cold value
"newstr"   = "12"                                                                  // new Strength value
"newint"   = "1"                                                                   // new Intelligence value
"newwis"   = "6"                                                                   // new Wisdom value
"newdex"   = "17"                                                                  // new Dexterity value
"newcon"   = "16"                                                                  // new Constitution value
"newchr"   = "2"                                                                   // new Charisma value
"newmor"   = "20"                                                                  // new morale value
"newgen"   = "4"                                                                   // new general value
"newrace"  = "117"                                                                 // new race
"newclass" = "143"                                                                 // new class
"newalign" = "35"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#wlfdi"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW#GPSHM"                                                          // Stratagems shout script
"script08"   = "DW2MP0MO"                                                          // Stratagems script
"script09"   = "WDASIGHT"                                                          // Vanilla AI script name
"script10"   = "DREADWLF"                                                          // Vanilla AI script name
"script11"   = "DW#VMRAT"                                                          // Big Picture shout script
END
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "101" END     // remove spurious opcode protections
LAUNCH_PATCH_FUNCTION cold_spell_immunities END                                    // Winter wolves are immune to cold
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Worg

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~WOLFWO01~                                                             // Worg - BG2
            ~WORGSU~                                                               // Worg - Druid Summoning Spell
            ~AGWORG01~                                                             // Worg - Aurora
            ~AGWORG02~                                                             // Worg - Aurora
            ~WORG~                                                                 // Worg - BG1
            ~WORGAR~                                                               // Worg - BG1

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#worg~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                  // replace default weapon with a more PnP accurate weapon
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"newmove"  = "11"                                                                  // new movement rate
"newxpv"   = "120"                                                                 // new XP value
"newhp"    = "27"                                                                  // new hit point value
"newac"    = "6"                                                                   // new Armor Class value
"newth"    = "17"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "13"                                                                  // new Save vs. Death
"newsvw"   = "15"                                                                  // new Save vs. Wand
"newsvp"   = "14"                                                                  // new Save vs. Polymorph
"newsvb"   = "16"                                                                  // new Save vs. Breath
"newsvs"   = "16"                                                                  // new Save vs. Spell
"newlvl1"  = "3"                                                                   // new level (first class)
"newstr"   = "16"                                                                  // new Strength value
"newint"   = "7"                                                                   // new Intelligence value
"newwis"   = "14"                                                                  // new Wisdom value
"newdex"   = "17"                                                                  // new Dexterity value
"newcon"   = "16"                                                                  // new Constitution value
"newchr"   = "10"                                                                  // new Charisma value
"newrace"  = "117"                                                                 // new race
"newclass" = "144"                                                                 // new class
"newmor"   = "11"                                                                  // new morale value
"newalign" = "35"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
"notenf01"	= "AGWORG02"
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#worg"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MP0MO"                                                          // Big Picture shout script
"script08"   = "DW#GPSHM"                                                          // Big Picture shout script
"skipfile01" = "WORGSU"                                                            // WORG summoned (Druid)
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Wolf, Dread

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~WOLFD1~                                                               // Dread Wolf - BG2
            ~WOLFDR~                                                               // Dread Wolf - BG2
            ~WOLFDR01~                                                             // Dread Wolf - BG1
            ~PLYWOLF~                                                              // Wolf - Druid polymorph
            ~ANWOLF1~                                                              // Dread Wolf - Heros, Thieves and Money Lander (HTML)
            ~P#WOLF05~                                                             // Dread Wolf - BG1 NPC
            ~P#WOLF04~                                                             // Dread Wolf - BG1 NPC

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~MONHP1~ #0 #0 #0 ~UNDROPPABLE~ ~AMULET~                 		   // min 1hp for script
REPLACE_CRE_ITEM ~RING95~ #0 #0 #0 ~UNDROPPABLE~ ~LRING~                 		   // PnP undead immunity
REPLACE_CRE_ITEM ~RR#dwreg~ #0 #0 #0 ~UNDROPPABLE~ ~BELT~                          // replace generic regeneration item with aTweaks' version
REPLACE_CRE_ITEM ~rr#dwolf~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"newmove"  = "13"                                                                  // new movement rate
"newxpv"   = "650"                                                                 // new XP value
"newhp"    = "36"                                                                  // new hit point value
"newac"    = "6"                                                                   // new Armor Class value
"newth"    = "15"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "11"                                                                  // new Save vs. Death
"newsvw"   = "13"                                                                  // new Save vs. Wand
"newsvp"   = "12"                                                                  // new Save vs. Polymorph
"newsvb"   = "13"                                                                  // new Save vs. Breath
"newsvs"   = "14"                                                                  // new Save vs. Spell
"newlvl1"  = "4"                                                                   // new level (first class)
"newer"	   = "50"                                                                  // new Resist Electricity value
"newcr"	   = "100"                                                                 // new Resist Cold value
"newstr"   = "17"                                                                  // new Strength value
"newint"   = "10"                                                                  // new Intelligence value
"newwis"   = "13"                                                                  // new Wisdom value
"newdex"   = "18"                                                                  // new Dexterity value
"newcon"   = "16"                                                                  // new Constitution value
"newchr"   = "10"                                                                  // new Charisma value
"newmor"   = "18"                                                                  // new morale value
"newgen"   = "4"                                                                   // new general value
"newrace"  = "117"                                                                 // new race
"newclass" = "148"                                                                 // new class
"newalign" = "35"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#dread"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW#GPSHM"                                                          // Stratagems shout script
"script08"   = "DW2MP0MO"                                                          // Stratagems script
"script09"   = "WDASIGHT"                                                          // Vanilla AI script name
"script10"   = "DREADWLF"                                                          // Vanilla AI script name
"script11"   = "DW#VMRAT"                                                          // Big Picture shout script
"script12"   = "MH#REG1T"                                                          // MiH_E&Q script
"skipfile01" = "PLYWOLF"                                                           // third AI script name
END
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#dwolf"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"skipfile01" = "WOLFD1"                                                            // third AI script name
"skipfile02" = "PLYWOLF"                                                           // third AI script name
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "101" END     // remove spurious opcode protections
LAUNCH_PATCH_FUNCTION cold_spell_immunities END                                    // Winter wolves are immune to cold
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Wolf, Winter

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~OBSICE03~                                                             // Winter Wolf - BG2
            ~WOLFWI~                                                               // Winter Wolf - BG1
            ~WOLFWI01~                                                             // Winter Wolf - BG2
            ~WOLFWISU~                                                             // Winter Wolf - Druid Summoning Spell
            ~WOLFWWSU~                                                             // Winter Wolf - BG2 (unused Wizard monster's summoning table)
            ~CDIA482~                                                              // Winter Wolf (IWDmod, polymorph)
            ~P#WOLF01~                                                             // Winter Wolf BG1 NPC
            ~WOLFEXIT~                                                             // Winter Wolf - TDD
            ~WOLFGET~                                                              // Winter Wolf - TDD

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REMOVE_CRE_ITEM ~wolfwi2~
REPLACE_CRE_ITEM ~rr#wwolf~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#frost~ #0 ~innate~ ( 1 )                                   // adds 1x Frost breath
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"newmove"  = "13"                                                                  // new movement rate
"newxpv"   = "975"                                                                 // new XP value
"newhp"    = "48"                                                                  // new hit point value
"newac"    = "5"                                                                   // new Armor Class value
"newth"    = "15"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "11"                                                                  // new Save vs. Death
"newsvw"   = "13"                                                                  // new Save vs. Wand
"newsvp"   = "12"                                                                  // new Save vs. Polymorph
"newsvb"   = "13"                                                                  // new Save vs. Breath
"newsvs"   = "14"                                                                  // new Save vs. Spell
"newfr"	   = "-50"                                                                 // new Resist Fire value
"newcr"	   = "100"                                                                 // new Resist Cold value
"newlvl1"  = "6"                                                                   // new level (first class)
"newstr"   = "18"                                                                  // new Strength value
"newint"   = "10"                                                                  // new Intelligence value
"newwis"   = "13"                                                                  // new Wisdom value
"newdex"   = "15"                                                                  // new Dexterity value
"newcon"   = "16"                                                                  // new Constitution value
"newchr"   = "10"                                                                  // new Charisma value
"newrace"  = "117"                                                                 // new race
"newclass" = "146"                                                                 // new class
"newmor"   = "13"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
"notenf01"  = "WOLFEXIT"                                                           // not enforced values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#wwolf"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2RP2MO"                                                          // Big Picture shout script
"script08"   = "MH#WIWLF"                                                          // MiH_E&Q script
"skipfile01" = "WOLFWISU"                                                          // unused Winter Wolf summoned (Mage)
"skipfile02" = "WOLFWWSU"                                                          // Winter Wolf summoned (Druid)
"skipfile03" = "CDIA482"                                                           // Winter Wolf polymorph IWDififcaton
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~DELETE_CRE_EFFECT~ INT_VAR opcode_to_delete = "101" END     // remove spurious opcode protections
LAUNCH_PATCH_FUNCTION cold_spell_immunities END                                    // Winter wolves are immune to cold
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Wolf, Vampiric

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~WOLFVA~                                                               // Vampiric Wolf - BG1
            ~WOLFVA01~                                                             // Vampiric Wolf - BG2
            ~AGWLFV01~                                                             // Vampiric Wolf - Aurora
            ~NTWOLFVA~                                                             // Vampiric Wolf - NTotSC
            ~P#WOLF04~                                                             // Vampiric Wolf - BG1 NPC

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~IMMUNE1~ #0 #0 #0 ~UNDROPPABLE~ ~RRING~                 		   // PnP undead immunity
REPLACE_CRE_ITEM ~RING95~ #0 #0 #0 ~UNDROPPABLE~ ~LRING~                 		   // PnP undead immunity
REPLACE_CRE_ITEM ~rr#vwolf~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"newmove"  = "13"                                                                  // new movement rate
"newxpv"   = "2000"                                                                // new XP value
"newhp"    = "52"                                                                  // new hit point value
"newac"    = "2"                                                                   // new Armor Class value
"newth"    = "13"                                                                  // new THAC0 value
"newapr"   = "1"                                                                   // new number of attacks per round
"newsvd"   = "10"                                                                  // new Save vs. Death
"newsvw"   = "12"                                                                  // new Save vs. Wand
"newsvp"   = "11"                                                                  // new Save vs. Polymorph
"newsvb"   = "12"                                                                  // new Save vs. Breath
"newsvs"   = "13"                                                                  // new Save vs. Spell
"newlvl1"  = "6"                                                                   // new level (first class)
"newstr"   = "18"                                                                  // new Strength value
"newint"   = "7"                                                                   // new Intelligence value
"newwis"   = "13"                                                                  // new Wisdom value
"newdex"   = "18"                                                                  // new Dexterity value
"newcon"   = "16"                                                                  // new Constitution value
"newchr"   = "10"                                                                  // new Charisma value
"newmor"   = "14"                                                                  // new morale value
"newgen"   = "4"                                                                   // new general value
"newrace"  = "117"                                                                 // new race
"newclass" = "147"                                                                 // new class
"newalign" = "51"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#vwolf"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW#GPSHM"                                                          // Stratagems shout script
"script08"   = "DW2MP2GE"                                                          // Stratagems melee script
"script09"   = "VAMPWOLF"                                                          // Vanilla script
"Skipfile01" = "NTWOLFVA"                                                          // Vanilla script
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END                                                                                // ends ACTION_FOR_EACH block

// Giant Lynx

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~CATLYN01~                                                             // Giant Lynx - BG2

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~rr#glynx~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                 // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~rr#glyn2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 				       // 2nd attack
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#stlth~ #0 ~innate~ ( 1 )                                   // adds 1x Hide in shadow
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bsimm" = "1"                                                                   // Backstab immunity
"rr#ptwf"  = "1"                                                                   // perfect two weapon fighting (for creatures with multiple weapons)
"newmove"  = "9"                                                                   // new movement rate
"newxpv"   = "175"                                                                 // new XP value
"newhp"    = "18"                                                                  // new hit point value
"newac"    = "6"                                                                   // new Armor Class value
"newth"    = "19"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "14"                                                                  // new Save vs. Death
"newsvw"   = "16"                                                                  // new Save vs. Wand
"newsvp"   = "15"                                                                  // new Save vs. Polymorph
"newsvb"   = "17"                                                                  // new Save vs. Breath
"newsvs"   = "17"                                                                  // new Save vs. Spell
"newlvl1"  = "2"                                                                   // new level (first class)
"newstr"   = "14"                                                                  // new Strength value
"newint"   = "12"                                                                  // new Intelligence value
"newwis"   = "12"                                                                  // new Wisdom value
"newdex"   = "18"                                                                  // new Dexterity value
"newcon"   = "14"                                                                  // new Constitution value
"newchr"   = "12"                                                                  // new Charisma value
"newrace"  = "137"                                                                 // new race (CAT)
"newclass" = "200"                                                                 // new class (HUNTER_CREATURE)
"newmor"   = "10"                                                                  // new morale value
"newalign" = "34"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#glynx"                                                          // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MP0MO"                                                          // Stratagems melee script
"script08"   = "HUNTER"                                                            // Hunter script
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END    

// Joolon

ACTION_FOR_EACH ~file~ IN                                                          // for each of the following files
            ~CATLIOWP~                                                             // Joolon - BG2

BEGIN                                                                              // execute the following
ACTION_IF FILE_EXISTS_IN_GAME ~%file%.cre~ BEGIN                                   // if the file exists
COPY_EXISTING ~%file%.cre~ ~override~
LAUNCH_PATCH_FUNCTION FJ_CRE_VALIDITY INT_VAR do_message = 1 END                   // Nythrun's CRE validity macro (detects corrupt and invalid CREs)
// =============================================================================== // the actual work starts from here
REPLACE_CRE_ITEM ~IMMUNE1~ #0 #0 #0 ~UNDROPPABLE~ ~LRING~                 		   // Immunity to +1 weapons
REPLACE_CRE_ITEM ~rr#jool~ #0 #0 #0 ~UNDROPPABLE~ ~WEAPON1~ EQUIP                  // replace default weapon with a more PnP accurate weapon
REPLACE_CRE_ITEM ~rr#jool2~ #0 #0 #0 ~UNDROPPABLE~ ~SHIELD~ 				       // 2nd attack
REMOVE_KNOWN_SPELLS                                                                // Remove all known spells from the current creature
REMOVE_MEMORIZED_SPELLS                                                            // Remove all memorized spells from the current creature
ADD_MEMORIZED_SPELL ~rr#scare~ #0 ~innate~ ( 1 )                                   // adds 1x Cloack of Fear
ADD_MEMORIZED_SPELL ~rr#blur~ #0 ~innate~ ( 1 )                                    // adds 1x Blur
LAUNCH_PATCH_FUNCTION ~RR#MDCRE~                                                   // Starts FUNCTION call (aTweaks' Creature Modification function)
INT_VAR                                                                            // Initialize variables
"rr#bsimm" = "1"                                                                   // Backstab immunity
"rr#ptwf"  = "1"                                                                   // perfect two weapon fighting (for creatures with multiple weapons)
"newmove"  = "16"                                                                  // new movement rate
"newxpv"   = "0"                                                                   // new XP value
"newhp"    = "67"                                                                  // new hit point value
"newac"    = "2"                                                                   // new Armor Class value
"newth"    = "11"                                                                  // new THAC0 value
"newapr"   = "2"                                                                   // new number of attacks per round
"newsvd"   = "8"                                                                   // new Save vs. Death
"newsvw"   = "10"                                                                  // new Save vs. Wand
"newsvp"   = "9"                                                                   // new Save vs. Polymorph
"newsvb"   = "9"                                                                   // new Save vs. Breath
"newsvs"   = "11"                                                                  // new Save vs. Spell
"newlvl1"  = "8"                                                                   // new level (first class)
"newstr"   = "18"                                                                  // new Strength value
"newstrx"  = "100"                                                                 // new Exceptional Strength value
"newint"   = "7"                                                                   // new Intelligence value
"newwis"   = "11"                                                                  // new Wisdom value
"newdex"   = "18"                                                                  // new Dexterity value
"newcon"   = "16"                                                                  // new Constitution value
"newchr"   = "9"                                                                   // new Charisma value
"newrace"  = "137"                                                                 // new race (CAT)
"newclass" = "175"                                                                 // new class (CAT)
"newmor"   = "16"                                                                  // new morale value
"newalign" = "33"                                                                  // new alignment (True Neutral)
STR_VAR                                                                            // initialize strings
"enforce"   = "1"                                                            	   // enforce values
END                                                                                // ends FUNCTION call
LPF ~make_summon~ 
END
LAUNCH_PATCH_FUNCTION ~RR#MDCSC~                                                   // Starts FUNCTION call (aTweaks' Creature Script Modification function)
STR_VAR                                                                            // Initialize strings
"newscript"  = "rr#jool"                                                           // new AI script
"script01"   = ""                                                                  // first AI script name
"script02"   = "None"                                                              // second AI script name
"script03"   = "WTASIGHT"                                                          // third AI script name
"script04"   = "GENSHT01"                                                          // generic shout script
"script05"   = "BPWDASGT"                                                          // Big Picture script
"script06"   = "DW#MELEE"                                                          // SCSII melee script
"script07"   = "DW2MP0MO"                                                          // Stratagems melee script
END                                                                                // ends FUNCTION call
// =============================================================================== // the actual work ends here
BUT_ONLY_IF_IT_CHANGES
END                                                                                // ends ACTION_IF FILE_EXISTS_IN_GAME block
END    

//////////////////
// New AI Scripts
//////////////////


COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#gassp.baf~                            // Gas spores AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#myco.baf~                             // Myconid int AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#shamb.baf~                            // Shambler AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#wdog.baf~                             // Dogs AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#wolf.baf~                             // Wolves AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#wlfdi.baf~                            // Dire wolves AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#bear.baf~                             // Bear cat AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#gcat.baf~                             // Great cat AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#snake.baf~                            // Snake AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#ankhg.baf~                            // Ankeheg AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#basil.baf~                            // Basilisk, Lesser AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#basig.baf~                            // Basilisk, Greater AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#snkbo.baf~                            // Boalisk Snake AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#bldog.baf~                            // Blink Dog AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#hhoun.baf~                            // Hell Hound AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#dmoon.baf~                            // Moon Dog AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#worg.baf~                             // Worg AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#wwolf.baf~                            // Winter Wolf AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#vwolf.baf~                            // Vampiric Wolf AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#dwolf.baf~                            // Dread Wolf AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#dread.baf~                            // Dread Wolf troll-like script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#glynx.baf~                            // Great Lynx AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#jool.baf~                             // Great Lynx AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#dogsu.baf~                            // dog summons script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#wlfsu.baf~                            // wolf summons script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#beasu.baf~                            // Bear summons script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#catsu.baf~                            // Great Cat summons AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#anksu.baf~                            // Great Cat summons AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#mndog.baf~                            // Moon Dog summons AI script
COMPILE EVALUATE_BUFFER ~atweaks/baf/plants/rr#boasu.baf~                            // Great Cat summons AI script

//////////////
// Update Summon animals spells
//////////////

ACTION_FOR_EACH file IN // Dogs
			~dogwilsu~
			~A#FERA01~
			~dogwarsu~
BEGIN
  ACTION_IF FILE_EXISTS_IN_GAME "%file%.cre" BEGIN
	COPY_EXISTING "%file%.cre" override
	  LPF ~RR#MDCRE~ INT_VAR newxpv = 0 END
	  LPF make_summon END
	  WRITE_ASCII SCRIPT_OVERRIDE "rr#dogsu" #8
	BUT_ONLY
  END
END

ACTION_FOR_EACH file IN // Wolves
			~wolfsu~
			~wolfdisu~
			~worgsu~
			~A#FERA02~
			~A#FERA03~
			~AGWLFV01~
BEGIN
  ACTION_IF FILE_EXISTS_IN_GAME "%file%.cre" BEGIN
	COPY_EXISTING "%file%.cre" override
	  LPF ~RR#MDCRE~ INT_VAR newxpv = 0 END
	  LPF make_summon END
	  WRITE_ASCII SCRIPT_OVERRIDE "rr#wlfsu" #8
	BUT_ONLY
  END
END

ACTION_FOR_EACH file IN // Bears
			~bearblsu~
			~bearbrsu~
			~bearcasu~
			~beargrsu~
			~bearposu~
			~rr#gbear~
			~F_BEARSU~
BEGIN
  ACTION_IF FILE_EXISTS_IN_GAME "%file%.cre" BEGIN
	COPY_EXISTING "%file%.cre" override
	  LPF ~RR#MDCRE~ INT_VAR newxpv = 0 END
	  LPF make_summon END
	  WRITE_ASCII SCRIPT_OVERRIDE "rr#beasu" #8
	BUT_ONLY
  END
END

ACTION_FOR_EACH file IN // Great Cat
			~catjagsu~
			~catjagwp~
			~jaguarsu~
			~catliosu~
			~rr#smilo~
			~F_GUEN~
BEGIN
  ACTION_IF FILE_EXISTS_IN_GAME "%file%.cre" BEGIN
	COPY_EXISTING "%file%.cre" override
	  LPF ~RR#MDCRE~ INT_VAR newxpv = 0 END
	  LPF make_summon END
	  WRITE_ASCII SCRIPT_OVERRIDE "rr#catsu" #8
	BUT_ONLY
  END
END

ACTION_FOR_EACH file IN // Ankheg
			~ANKHGSUM~
BEGIN
  ACTION_IF FILE_EXISTS_IN_GAME "%file%.cre" BEGIN
	COPY_EXISTING "%file%.cre" override
	  LPF ~RR#MDCRE~ INT_VAR newxpv = 0 END
	  LPF make_summon END
	  WRITE_ASCII SCRIPT_OVERRIDE "rr#anksu" #8
	BUT_ONLY
  END
END

ACTION_FOR_EACH file IN // Boalisk
			~BOALKSUM~
BEGIN
  ACTION_IF FILE_EXISTS_IN_GAME "%file%.cre" BEGIN
	COPY_EXISTING "%file%.cre" override
	  LPF ~RR#MDCRE~ INT_VAR newxpv = 0 END
	  LPF make_summon END
	  WRITE_ASCII SCRIPT_OVERRIDE "rr#boasu" #8
	BUT_ONLY
  END
END

ACTION_FOR_EACH file IN // Staff of woodlands
			~SMOUND02~
			~SMOUNDSU~
BEGIN
  ACTION_IF FILE_EXISTS_IN_GAME "%file%.cre" BEGIN
	COPY_EXISTING "%file%.cre" override
	  LPF ~RR#MDCRE~ INT_VAR newxpv = 0 END
	  LPF make_summon END
	  WRITE_ASCII SCRIPT_OVERRIDE "rr#SHAMB" #8
	BUT_ONLY
  END
END

ACTION_FOR_EACH file IN // RR's Shambling mound
			~RR#SHM01~
			~RR#SHM02~
			~RR#SHM03~
BEGIN
  ACTION_IF FILE_EXISTS_IN_GAME "%file%.cre" BEGIN
	COPY_EXISTING "%file%.cre" override
	  LPF ~RR#MDCRE~ INT_VAR newxpv = 0 END
	  LPF make_summon END
	  WRITE_ASCII SCRIPT_OVERRIDE "rr#SHM" #8
	  WRITE_ASCII SCRIPT_CLASS "rr#SHAMB" #8
	BUT_ONLY
  END
END
ACTION_FOR_EACH file IN // RR's Shambling mound
			~MOONDOG~
BEGIN
  ACTION_IF FILE_EXISTS_IN_GAME "%file%.cre" BEGIN
	COPY_EXISTING "%file%.cre" override
	  LPF ~RR#MDCRE~ INT_VAR newxpv = 0 END
	  LPF make_summon END
	  WRITE_ASCII SCRIPT_OVERRIDE "rr#mndog" #8
	BUT_ONLY
  END
END

ACTION_IF !MOD_IS_INSTALLED "SPELL_REV.TP2" "0" BEGIN								// Compatibility with Spell Revision: do not change spells if it is installed
COPY_EXISTING ~bearblsu.cre~ override
			  ~catjagsu.cre~ override
			  ~jaguarsu.cre~ override
			  ~wolfdisu.cre~ override
	WRITE_LONG 0x18 3																// XP/Power Level animalsummon 1 (x5)

COPY_EXISTING ~bearposu.cre~ override
			  ~rr#smilo.cre~ override
	WRITE_LONG 0x18 6																// XP/Power Level animalsummon 2 (x5)

COPY_EXISTING ~rr#gbear.cre~ override
	WRITE_LONG 0x18 15																// XP/Power Level animalsummon 3 (x4)
 
	COPY ~atweaks/2da/plants/anisum01.2da~ override
		 ~atweaks/2da/plants/anisum02.2da~ override
		 ~atweaks/2da/plants/anisum03.2da~ override
		 ~atweaks/2da/plants/rr#anim1.2da~ override
		 ~atweaks/2da/plants/rr#anim2.2da~ override
		 ~atweaks/2da/plants/rr#anim3.2da~ override
	COPY ~atweaks/eff/plants/rr#anim1.eff~ override
		 ~atweaks/eff/plants/rr#anim2.eff~ override
		 ~atweaks/eff/plants/rr#anim3.eff~ override
	COPY ~atweaks/spl/plants/rr#pr604.spl~ ~override/sppr604.spl~
	// Summoned should not leave corpses behind after they are slain
	// Also, they should not be targetable while the summoning animation plays
	// Lastly, the player should have the option to dismiss (unsummon) a summoned creature at will
END

///////////////////////////////////
// More sensible plants encounters
///////////////////////////////////

ACTION_IF GAME_INCLUDES ~soa~ BEGIN
// This was done because fungus-based subterranean creatures do not willingly expose themselves to direct sunlight.
// the Spore Colonies and the accompanying Myconids desactivated during the day and are back at night. 

COPY_EXISTING ~AR1900.are~ ~override~
PATCH_IF SOURCE_SIZE > 0x11b BEGIN		//Invalid file size check
  GET_OFFSET_ARRAY actors ARE_V10_ACTORS
  //Patch "creatures which doesn't look good in the dark" out, at night 
	PHP_EACH actors AS i => off BEGIN
	READ_ASCII off + 0x80 cre_resref
	  PATCH_IF ("%cre_resref%" STRING_EQUAL_CASE "ICFUNGUS") BEGIN
	    WRITE_LONG off + 0x40 0xfe001f
	  END
	END
END

ACTION_IF MOD_IS_INSTALLED STRATAGEMS.TP2 8190 BEGIN

  <<<<<<<<.../atweaks-inlined/baf/plants/dw#1900.baf
IF
	Global("ImpPrep","AR1900",0)  // Druid Grove
THEN
	RESPONSE #100
		SetGlobal("ImpPrep","AR1900",1)  // Druid Grove
		CreateCreature("trolsi01",[4000.2500],S)  // Spirit Troll
		CreateCreature("trolsi01",[4005.2500],S)  // Spirit Troll
		CreateCreature("trolsi01",[4000.2505],S)  // Spirit Troll
		CreateCreature("trolsp01",[1300.1900],S)  // Spectral Troll
		CreateCreature("trolsp01",[1300.1905],S)  // Spectral Troll
		CreateCreature("trolsp01",[1305.1900],S)  // Spectral Troll
		CreateCreature("dw#eldee",[1293.1205],S)  // Elder Earth Elemental
		CreateCreature("icfung02",[3571.1391],S)  // Spore Colony
		CreateCreature("icfung02",[3697.1305],S)  // Spore Colony
		CreateCreature("icfung02",[3791.1253],S)  // Spore Colony
		CreateCreature("icfung02",[3946.1198],S)  // Spore Colony
		CreateCreature("icfung02",[4061.1122],S)  // Spore Colony
		CreateCreature("icfung02",[4197.1017],S)  // Spore Colony
		CreateCreature("smound01",[3396.468],S)  // Shambling Mound
		CreateCreature("smound01",[3199.478],S)  // Shambling Mound
		CreateCreature("smound01",[3021.429],S)  // Shambling Mound
		CreateCreature("spspid07",[3745.281],S)  // Sword Spider
		CreateCreature("spspid07",[2500.2500],S)  // Sword Spider
		CreateCreature("spspid07",[2500.2505],S)  // Sword Spider
		CreateCreature("spspid07",[2505.2500],S)  // Sword Spider
		CreateCreature("spspid07",[2505.2505],S)  // Sword Spider
		CreateCreature("wyvbab01",[4073.2089],S)  // Baby Wyvern
		CreateCreature("wyvbab01",[3893.2100],S)  // Baby Wyvern
		CreateCreature("wyvbab01",[4120.1727],S)  // Baby Wyvern
		CreateCreature("trevil04",[1624.459],S)  // Grizzly Bear
		CreateCreature("trevil04",[1624.557],S)  // Grizzly Bear
		CreateCreature("trevil04",[1624.668],S)  // Grizzly Bear
		CreateCreature("trevil04",[1775.695],S)  // Grizzly Bear
		CreateCreature("trevil04",[1774.579],S)  // Grizzly Bear
		Continue()
END
  >>>>>>>>

<<<<<<<<.../atweaks-inlined/baf/plants/rr#1900.baf
IF
	Global("ImpPrep","AR1900",0)  // Druid Grove
THEN
	RESPONSE #100
		SetGlobal("ImpPrep","AR1900",1)  // Druid Grove
		CreateCreature("trolsi01",[4000.2500],S)  // Spirit Troll
		CreateCreature("trolsi01",[4005.2500],S)  // Spirit Troll
		CreateCreature("trolsi01",[4000.2505],S)  // Spirit Troll
		CreateCreature("trolsp01",[1300.1900],S)  // Spectral Troll
		CreateCreature("trolsp01",[1300.1905],S)  // Spectral Troll
		CreateCreature("trolsp01",[1305.1900],S)  // Spectral Troll
		CreateCreature("dw#eldee",[1293.1205],S)  // Elder Earth Elemental
		CreateCreature("smound01",[3396.468],S)  // Shambling Mound
		CreateCreature("smound01",[3199.478],S)  // Shambling Mound
		CreateCreature("smound01",[3021.429],S)  // Shambling Mound
		CreateCreature("spspid07",[3745.281],S)  // Sword Spider
		CreateCreature("spspid07",[2500.2500],S)  // Sword Spider
		CreateCreature("spspid07",[2500.2505],S)  // Sword Spider
		CreateCreature("spspid07",[2505.2500],S)  // Sword Spider
		CreateCreature("spspid07",[2505.2505],S)  // Sword Spider
		CreateCreature("wyvbab01",[4073.2089],S)  // Baby Wyvern
		CreateCreature("wyvbab01",[3893.2100],S)  // Baby Wyvern
		CreateCreature("wyvbab01",[4120.1727],S)  // Baby Wyvern
		CreateCreature("trevil04",[1624.459],S)  // Grizzly Bear
		CreateCreature("trevil04",[1624.557],S)  // Grizzly Bear
		CreateCreature("trevil04",[1624.668],S)  // Grizzly Bear
		CreateCreature("trevil04",[1775.695],S)  // Grizzly Bear
		CreateCreature("trevil04",[1774.579],S)  // Grizzly Bear
		Continue()
END

IF
	Global("rr#ImpPrep","AR1900",0)  // Druid Grove
	TimeOfDay("NIGHT")
THEN
	RESPONSE #100
		SetGlobal("rr#ImpPrep","AR1900",1)  // Druid Grove
		CreateCreature("icfung02",[3571.1391],S)  // Spore Colony
		CreateCreature("icfung02",[3697.1305],S)  // Spore Colony
		CreateCreature("icfung02",[3791.1253],S)  // Spore Colony
		CreateCreature("icfung02",[3946.1198],S)  // Spore Colony
		CreateCreature("icfung02",[4061.1122],S)  // Spore Colony
		CreateCreature("icfung02",[4197.1017],S)  // Spore Colony
		Continue()
END
>>>>>>>>

COPY_EXISTING "ar1900.bcs" override
    R_B_B CASE_INSENSITIVE
      ~.../atweaks-inlined/baf/plants/dw#1900.baf~
      ~.../atweaks-inlined/baf/plants/rr#1900.baf~
BUT_ONLY


END ELSE BEGIN
// A Shambling Mound and two Lesser Shamblers are added as new encounters

<<<<<<<<.../atweaks-inlined/baf/plants/rr#1900.baf
IF
Global("rr#spwn","AR1900",0)
THEN
RESPONSE #100
SetGlobal("rr#spwn","AR1900",1)
CreateCreature("GLOBSHAM",[2085.677],4)  // Shambling mound
CreateCreature("SMOUND01",[1862.597],4) // Lesser Shambler
CreateCreature("SMOUND01",[1760.723],4) // Lesser Shambler
Continue()
END
>>>>>>>>
	EXTEND_BOTTOM ~AR1900.BCS~  ~.../atweaks-inlined/baf/plants/rr#1900.baf~               // extend druid grove area script
END
END

//////////////
// Misc stuff
//////////////

// Extend Spore Colony Scripts to summon 1 Myconid King
<<<<<<<<.../atweaks-inlined/baf/plants/rr#king1.baf
IF
Delay(10)
See(NearestEnemyOf(Myself))
Global("rr#king","LOCALS",0)
THEN
RESPONSE #100
SetGlobal("rr#king","LOCALS",1)
ForceSpellRes("rr#mking",Myself)  // Summon Fungus King
END
>>>>>>>>
	EXTEND_BOTTOM ~ICFUNGUS.BCS~  ~.../atweaks-inlined/baf/plants/rr#king1.baf~               // extend Spore Colony Script
	EXTEND_BOTTOM ~ICFUNG02.BCS~  ~.../atweaks-inlined/baf/plants/rr#king1.baf~               // extend Spore Colony Script

<<<<<<<<.../atweaks-inlined/baf/plants/rr#king2.baf
IF
Exists("ICMYC02")
THEN
RESPONSE #100
SetGlobal("rr#king","LOCALS",1)
END
>>>>>>>>
	EXTEND_TOP ~ICFUNGUS.BCS~  ~.../atweaks-inlined/baf/plants/rr#king2.baf~               // extend Spore Colony Script
	EXTEND_TOP ~ICFUNG02.BCS~  ~.../atweaks-inlined/baf/plants/rr#king2.baf~               // extend Spore Colony Script


// Write the queued-up values
ACTION_PHP_EACH f_AddSecType AS file => SecTypeToAdd BEGIN
  COPY_EXISTING "%file%" override
    WRITE_BYTE 0x27 SecTypeToAdd
  BUT_ONLY
END

OUTER_SET $f_ImmunitySecType(78) = DiseaseSecType
OUTER_SET $f_RemoveSecType(79) = DiseaseSecType

LAF integrate_sectypes END

///////////////////////////////////
// Compatibility
///////////////////////////////////

// compatibility with IR and IR/R: restore old desc for figurines
//////////
ACTION_IF MOD_IS_INSTALLED "ITEM_REV.TP2" "0" BEGIN
	COPY_EXISTING MISC3D.ITM override
		SAY IDENTIFIED_DESC #39654
	COPY_EXISTING MISC3E.ITM override
		SAY IDENTIFIED_DESC #39656
	COPY_EXISTING MISC3F.ITM override
		SAY IDENTIFIED_DESC #39657
		PATCH_FOR_EACH offset IN 0xc 0x54 BEGIN
		  READ_LONG ~%offset%~ desc_strref
		  PATCH_IF (desc_strref >= 0 && desc_strref < 2147483646) BEGIN
		  READ_STRREF ~%offset%~ desc
		  INNER_PATCH_SAVE desc ~%desc%~ BEGIN
			REPLACE_TEXTUALLY CASE_INSENSITIVE EXACT_MATCH ~2d4~ ~1d10~
			END
		  END
		  SAY_EVALUATED offset ~%desc%~
		END
	COPY_EXISTING MISC7T.ITM override
		SAY IDENTIFIED_DESC #40634

END ELSE BEGIN

  COPY_EXISTING MISC3F.ITM override
	PATCH_FOR_EACH offset IN 0xc 0x54 BEGIN
	  READ_LONG ~%offset%~ desc_strref
	  PATCH_IF (desc_strref >= 0 && desc_strref < 2147483646) BEGIN
	  READ_STRREF ~%offset%~ desc
	  INNER_PATCH_SAVE desc ~%desc%~ BEGIN
		REPLACE_TEXTUALLY CASE_INSENSITIVE EXACT_MATCH ~2d4~ ~1d10~
		END
	  END
	  SAY_EVALUATED offset ~%desc%~
	  END
END

// compatibility with RR
//////////
<<<<<<<<.../atweaks-inlined/baf/plants/empty.baf
>>>>>>>>

ACTION_IF FILE_EXISTS_IN_GAME rr#shm.bcs BEGIN
// attack block need to be removed
OUTER_SET blends = RESOLVE_STR_REF("(blends into natural surroundings)") 
OUTER_SET nature = RESOLVE_STR_REF("BY NATURE'S WILL, I ANSWER YOUR CALL!")
<<<<<<<<.../atweaks-inlined/baf/plants/rr#shmbler.baf
IF
	!InActiveArea(Myself)
THEN
	RESPONSE #100
		NoAction()
END

IF
	Allegiance(Myself,EVILCUTOFF)
	OR(2)
		See([GOODCUTOFF])
		See(LastSummonerOf(Myself))
THEN
	RESPONSE #100
		AttackReevaluate(LastSeenBy(Myself),15)
END

IF
	!Allegiance(Myself,EVILCUTOFF)
	!StateCheck(Myself,STATE_INVISIBLE)
	!Global("dvgldust","LOCALS",1)
	CombatCounter(0)
	!See([EVILCUTOFF])
	OR(5)
		AreaType(FOREST)
		AreaCheck("AR0043") // Random encounter (forest)
		AreaCheck("AR1700") // Small teeth pass (marsh)
		AreaCheck("AR1900") // Druid Grove (marsh)
		AreaCheck("AR6400") // North Forest in ToB (marsh)
THEN
	RESPONSE #100
		DisplayString(Myself,%blends%) // blends into natural surroundings
		ApplySpellRES("RR#INVIS",Myself)
		PlaySound("ACT_07")
		Continue()
END

IF
	!Allegiance(Myself,EVILCUTOFF)
	!InParty([EVILCUTOFF])
	See([EVILCUTOFF])
	False()
THEN
	RESPONSE #100
		Continue()
END

IF
	!Allegiance(Myself,EVILCUTOFF)
	!InParty(SixthNearest([EVILCUTOFF]))
	!CheckStatGT(SixthNearest([EVILCUTOFF]),2,WIZARD_PROTECTION_FROM_MAGIC_WEAPONS)  // no Absolute Immunity or PfMW
	CheckStatLT(SixthNearest([EVILCUTOFF]),1,STONESKINS)
	CheckStatLT(SixthNearest([EVILCUTOFF]),100,RESISTCRUSHING)
	!StateCheck(SixthNearest([EVILCUTOFF]),STATE_MIRRORIMAGE)
	!StateCheck(SixthNearest([EVILCUTOFF]),STATE_PANIC)
	See(SixthNearest([EVILCUTOFF]))
	False()
THEN
	RESPONSE #100
		Continue()
END

IF
	!Allegiance(Myself,EVILCUTOFF)
	!InParty(FifthNearest([EVILCUTOFF]))
	!CheckStatGT(FifthNearest([EVILCUTOFF]),2,WIZARD_PROTECTION_FROM_MAGIC_WEAPONS)  // no Absolute Immunity or PfMW
	CheckStatLT(FifthNearest([EVILCUTOFF]),1,STONESKINS)
	CheckStatLT(FifthNearest([EVILCUTOFF]),100,RESISTCRUSHING)
	!StateCheck(FifthNearest([EVILCUTOFF]),STATE_MIRRORIMAGE)
	!StateCheck(FifthNearest([EVILCUTOFF]),STATE_PANIC)
	See(FifthNearest([EVILCUTOFF]))
	False()
THEN
	RESPONSE #100
		Continue()
END

IF
	!Allegiance(Myself,EVILCUTOFF)
	!InParty(FourthNearest([EVILCUTOFF]))
	!CheckStatGT(FourthNearest([EVILCUTOFF]),2,WIZARD_PROTECTION_FROM_MAGIC_WEAPONS)  // no Absolute Immunity or PfMW
	CheckStatLT(FourthNearest([EVILCUTOFF]),1,STONESKINS)
	CheckStatLT(FourthNearest([EVILCUTOFF]),100,RESISTCRUSHING)
	!StateCheck(FourthNearest([EVILCUTOFF]),STATE_MIRRORIMAGE)
	!StateCheck(FourthNearest([EVILCUTOFF]),STATE_PANIC)
	See(FourthNearest([EVILCUTOFF]))
	False()
THEN
	RESPONSE #100
		Continue()
END

IF
	!Allegiance(Myself,EVILCUTOFF)
	!InParty(ThirdNearest([EVILCUTOFF]))
	!CheckStatGT(ThirdNearest([EVILCUTOFF]),2,WIZARD_PROTECTION_FROM_MAGIC_WEAPONS)  // no Absolute Immunity or PfMW
	CheckStatLT(ThirdNearest([EVILCUTOFF]),1,STONESKINS)
	CheckStatLT(ThirdNearest([EVILCUTOFF]),100,RESISTCRUSHING)
	!StateCheck(ThirdNearest([EVILCUTOFF]),STATE_MIRRORIMAGE)
	!StateCheck(ThirdNearest([EVILCUTOFF]),STATE_PANIC)
	See(ThirdNearest([EVILCUTOFF]))
	False()
THEN
	RESPONSE #100
		Continue()
END

IF
	!Allegiance(Myself,EVILCUTOFF)
	!InParty(SecondNearest([EVILCUTOFF]))
	!CheckStatGT(SecondNearest([EVILCUTOFF]),2,WIZARD_PROTECTION_FROM_MAGIC_WEAPONS)  // no Absolute Immunity or PfMW
	CheckStatLT(SecondNearest([EVILCUTOFF]),1,STONESKINS)
	CheckStatLT(SecondNearest([EVILCUTOFF]),100,RESISTCRUSHING)
	!StateCheck(SecondNearest([EVILCUTOFF]),STATE_MIRRORIMAGE)
	!StateCheck(SecondNearest([EVILCUTOFF]),STATE_PANIC)
	See(SecondNearest([EVILCUTOFF]))
	False()
THEN
	RESPONSE #100
		Continue()
END

IF
	!Allegiance(Myself,EVILCUTOFF)
	!InParty([EVILCUTOFF])
	!CheckStatGT([EVILCUTOFF],2,WIZARD_PROTECTION_FROM_MAGIC_WEAPONS)  // no Absolute Immunity or PfMW
	CheckStatLT([EVILCUTOFF],1,STONESKINS)
	CheckStatLT([EVILCUTOFF],100,RESISTCRUSHING)
	!StateCheck([EVILCUTOFF],STATE_MIRRORIMAGE)
	!StateCheck([EVILCUTOFF],STATE_PANIC)
	See([EVILCUTOFF])
	False()
THEN
	RESPONSE #100
		Continue()
END

IF
	!Allegiance(Myself,EVILCUTOFF)
	!InParty(LastSeenBy(Myself))
	Allegiance(LastSeenBy(Myself),EVILCUTOFF)
	HPGT(LastSeenBy(Myself),0)
THEN
	RESPONSE #100
		AttackReevaluate(LastSeenBy(Myself),15)
END

IF
	!Allegiance(Myself,EVILCUTOFF)
	!See([EVILCUTOFF])
	ActionListEmpty()
	InParty(LastSummonerOf(Myself))
	!Range(LastSummonerOf(Myself),15)
	InMyArea(LastSummonerOf(Myself))
	InActiveArea(Myself)
	InActiveArea(LastSummonerOf(Myself))
THEN
	RESPONSE #100
		DisplayString(Myself,%nature%) // BY NATURE'S WILL, I ANSWER YOUR CALL!
		Formation(LastSummonerOf(Myself),[-4.-4])
END

IF
	!Allegiance(Myself,EVILCUTOFF)
	!See([EVILCUTOFF])
	ActionListEmpty()
	!InParty(LastSummonerOf(Myself))
	!Range(Player1,15)
	InMyArea(Player1)
	InActiveArea(Myself)
THEN
	RESPONSE #100
		Formation(Player1,[-4.-4])
END
>>>>>>>>

ACTION_IF FILE_EXISTS_IN_GAME "rr#shm.bcs" BEGIN
 COPY_EXISTING "rr#shm.bcs" override
    R_B_B EVALUATE_BUFFER CASE_INSENSITIVE
      ~.../atweaks-inlined/baf/plants/rr#shmbler.baf~
      ~.../atweaks-inlined/baf/plants/empty.baf~
  BUT_ONLY
END
END

//NTotSC
////////

<<<<<<<<.../atweaks-inlined/baf/plants/RR#NTWVA.baf
IF
	See(NearestEnemyOf(Myself))
	Dead("NTDOGFUN")  // War Dog
	Dead("NTDOGFU1")  // War Dog
	Dead("NTDOGFU2")  // War Dog
THEN
	RESPONSE #100
		ChangeAIScript("rr#vwolf",OVERRIDE)
		ChangeAIScript("",CLASS)
		ChangeAIScript("",RACE)
		ChangeAIScript("",GENERAL)
		ChangeAIScript("",DEFAULT)
END
>>>>>>>>
// attack block need to be removed
<<<<<<<<.../atweaks-inlined/baf/plants/atkNT.baf
IF
	See(NearestEnemyOf(Myself))
	Dead("NTDOGFUN")
	Dead("NTDOGFU1")
	Dead("NTDOGFU2")
THEN
	RESPONSE #100
		Attack(NearestEnemyOf(Myself))
END
>>>>>>>>

ACTION_IF FILE_EXISTS_IN_GAME "NTWOLFVA.bcs" BEGIN
 COPY_EXISTING "NTWOLFVA.bcs" override
    R_B_B CASE_INSENSITIVE
      ~.../atweaks-inlined/baf/plants/atkNT.baf~
      ~.../atweaks-inlined/baf/plants/RR#NTWVA.baf~
  BUT_ONLY
END
// attack block need to be removed
<<<<<<<<.../atweaks-inlined/baf/plants/atk_dog_NT.baf
IF
	See(NearestEnemyOf(Myself))
THEN
	RESPONSE #100
		AttackReevaluate(NearestEnemyOf(Myself),30)
END

IF
	AttackedBy([ANYONE],DEFAULT)
THEN
	RESPONSE #100
		Attack(LastAttackerOf(Myself))
END
>>>>>>>>

ACTION_IF FILE_EXISTS_IN_GAME "NTDOGFU2.bcs" BEGIN
 COPY_EXISTING "NTDOGFU2.bcs" override
    R_B_B CASE_INSENSITIVE
      ~.../atweaks-inlined/baf/plants/atk_dog_NT.baf~
      ~.../atweaks-inlined/baf/plants/empty.baf~
  BUT_ONLY
END

//BG1 NPC MOD
// attack's block need to be removed
/////////
<<<<<<<< .../atweaks-inlined/baf/plants/atkP#.baf
IF
	See(NearestEnemyOf(Myself))
	!Range(NearestEnemyOf(Myself),5)
THEN
	RESPONSE #100
		EquipRanged()
		AttackReevaluate(NearestEnemyOf(Myself),30)
END

IF
	See(NearestEnemyOf(Myself))
	Range(NearestEnemyOf(Myself),5)
THEN
	RESPONSE #100
		EquipMostDamagingMelee()
		AttackReevaluate(NearestEnemyOf(Myself),30)
END

IF
	AttackedBy([ANYONE],DEFAULT)
THEN
	RESPONSE #100
		AttackReevaluate(LastAttackerOf(Myself),30)
END
>>>>>>>>

ACTION_IF FILE_EXISTS_IN_GAME "P#WOLFA.bcs" BEGIN
 COPY_EXISTING "P#WOLFA.bcs" override
    R_B_B CASE_INSENSITIVE
      ~.../atweaks-inlined/baf/plants/atkP#.baf~
      ~.../atweaks-inlined/baf/plants/empty.baf~
  BUT_ONLY
END